!function(a){function b(b,c){var d={forceAbsolute:!1,container:window,completeHandler:null,animate:!0};return a.extend(d,c),b.each(function(c){var e=a(b),f=a(d.container),g=d.container==window;d.forceAbsolute&&(g?e.remove().appendTo("body"):e.remove().appendTo(f.get(0))),e.css("position","absolute");var h=g?2:1.8,i=(g?f.width():f.outerWidth())/2-e.outerWidth()/2,j=(g?f.height():f.outerHeight())/h-e.outerHeight()/2;!0===d.animate?e.stop(!0,!0).animate({left:i+f.scrollLeft(),top:j+f.scrollTop()},500):e.stop(!0,!0).css({left:i+f.scrollLeft(),top:j+f.scrollTop()}),d.completeHandler&&d.completeHandler(b)})}function c(b){return a("<div />").append(a(b).eq(0).clone()).html()}function d(d,e){var f="",g="",h="",i="X",j="";a(d).click(function(d){function k(){b(n)}"function"==typeof e.onStart&&e.onStart(),f="number"==typeof e.width&&e.width>0?"width:"+e.width+"px;":"",g="number"==typeof e.height&&e.height>0?"height:"+e.height+"px;":"",h=""!=f||""!=g?f+" "+g:"",i="string"==typeof e.closeText?e.closeText:i;var l='<div class="popbox-cast" style="display:none;height:100%; width: 100%; position:absolute; left: 0; top:0; background: rgba(0,0,0,0.4); z-index: 9990;"></div><div class="popbox-popup" style="visibility:hidden;'+h+'"><a class="popbox-close">'+i+"</a>";j=null!=e.html&&0!=e.html&&""!=e.html&&"string"==typeof e.html?e.html:j;var m=!1;0!=e.contentid&&"string"==typeof e.contentid&&""===j&&(m=a("#"+e.contentid),j=m.length>0?c(m):j,m.remove()),a("body").append(l+j+"</div>");var n=a(".popbox-popup"),o=a(".popbox-cast");o.fadeIn(300),0!=e.contentid&&n.find("#"+e.contentid),b(n,{animate:!1}),n.css({visibility:"",display:"none"}).fadeIn(300);var p=!1;a(window).resize(function(){0==p&&(p=!0,setTimeout(function(){k(),p=!1},500))});var q=!1;a(window).scroll(function(){0==q&&(q=!0,setTimeout(function(){k(),q=!1},500))});var r=!1;a(".popbox-cast,.popbox-close").click(function(b){r||("function"==typeof e.onClose&&e.onClose(),n.fadeOut(500,function(){a(this).remove()}),o.fadeOut(500,function(){a(this).remove()}),r=!0),b.preventDefault()}),"function"==typeof e.onShow&&e.onShow(),d.preventDefault()})}a.fn.PopBox=function(b){var c={transition:!1,width:0,height:0,html:!1,contentid:!1,closeText:"X",onShow:!1,onClose:!1,onStart:!1};d(this,a.extend({},c,b))}}(jQuery);