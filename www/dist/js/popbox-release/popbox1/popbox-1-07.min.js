!function(o){function t(t,e){var n={forceAbsolute:!1,container:window,completeHandler:null,animate:!0};return o.extend(n,e),t.each(function(e){var i=o(t),c=o(n.container),p=n.container==window;n.forceAbsolute&&(p?i.remove().appendTo("body"):i.remove().appendTo(c.get(0))),i.css("position","absolute");var l=p?2:1.8,s=(p?c.width():c.outerWidth())/2-i.outerWidth()/2,a=(p?c.height():c.outerHeight())/l-i.outerHeight()/2;n.animate===!0?i.stop(!0,!0).animate({left:s+c.scrollLeft(),top:a+c.scrollTop()},500):i.stop(!0,!0).css({left:s+c.scrollLeft(),top:a+c.scrollTop()}),n.completeHandler&&n.completeHandler(t)})}function e(t){return o("<div />").append(o(t).eq(0).clone()).html()}function n(n,i){var c="",p="",l="",s="X",a="";o(n).click(function(n){function r(){t(h)}"function"==typeof i.onClick&&i.onClick(i),c="number"==typeof i.width&&i.width>0?"width:"+i.width+"px;":"",p="number"==typeof i.height&&i.height>0?"height:"+i.height+"px;":"",l=""!=c||""!=p?c+" "+p:"",s="string"==typeof i.closeText?i.closeText:s;var f='<div class="popbox-cast" style="display:none;height:100%; width: 100%; position:fixed; left: 0; top:0; background-color: rgba(0,0,0,0.4); z-index: 9990;"></div><div class="popbox-popup" style="position:absolute; z-index:9991; visibility:hidden;'+l+'"><a class="popbox-close">'+s+"</a>",d="</div>";a=null!=i.html&&0!=i.html&&""!=i.html&&"string"==typeof i.html?i.html:a;var u=!1;0!=i.contentid&&"string"==typeof i.contentid&&""===a&&(u=o("#"+i.contentid),a=u.length>0?e(u):a,u.remove()),o("body").append(f+a+d);var h=o(".popbox-popup"),v=o(".popbox-cast"),m=!1;i.close=function(){m||("function"==typeof i.onClose&&i.onClose(i),i.popbox=!1,h.fadeOut(500,function(){o(this).remove()}),v.fadeOut(500,function(){o(this).remove()}),m=!0)},i.popbox=h,"function"==typeof i.onStart&&i.onStart(i),v.fadeIn(300),0!=i.contentid&&h.find("#"+i.contentid),t(h,{animate:!1}),h.css({visibility:"",display:"none"}).fadeIn(300);var b=!1;o(window).resize(function(){0==b&&(b=!0,setTimeout(function(){r(),b=!1},500))});var x=!1;o(window).scroll(function(){0==x&&(x=!0,setTimeout(function(){r(),x=!1},500))}),o(".popbox-cast,.popbox-close").click(function(t){m||("function"==typeof i.onClose&&i.onClose(i),i.popbox=!1,h.fadeOut(500,function(){o(this).remove()}),v.fadeOut(500,function(){o(this).remove()}),m=!0),t.preventDefault()}),"function"==typeof i.onShow&&i.onShow(i),n.preventDefault()})}o.fn.PopBox=function(t){var e={transition:!1,width:0,height:0,html:!1,contentid:!1,closeText:"X",onShow:!1,onClose:!1,onStart:!1,onClick:!1},i=o.extend({},e,t);i.popbox=!1,n(this,i)}}(jQuery);