!function($,n){var i=function(){},w={$window:$(n),$document:$(document),$html:$("html"),$body:$("body"),_event_namespace:"Popbox",_next_instance_id:0,_next_transition_id:0,_instances:{length:0},_support:{},_speeds:{_default:300,fast:300,medium:600,slow:1e3},_eases:{_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},_transition_end_event_names:{transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},_test_div:document.createElement("div")};function e(e){if(e in w._test_div.style)return e;for(var t=["Moz","Webkit","O","ms"],i=e.charAt(0).toUpperCase()+e.substr(1),o=0;o<t.length;++o){var n=t[o]+i;if(n in w._test_div.style)return n}}w._support.transition=e("transition"),w._support.transform=e("transform"),w._support.transform_origin=e("transformOrigin"),w._support.transition_end=w._transition_end_event_names[w._support.transition]||null,w._support.transform3d=function(){var e,t=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var o in document.body.insertBefore(t,null),i)i.hasOwnProperty(o)&&void 0!==t.style[o]&&(t.style[o]="translate3d(1px,1px,1px)",e=n.getComputedStyle(t).getPropertyValue(i[o]));return document.body.removeChild(t),void 0!==e&&0<e.length&&"none"!==e}(),w._test_div=null,w.param=function(e,t){return void 0!==e?e:t},w.regexEscape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},w.isSet=function(e){return void 0!==e},w.isFunction=function(e){return"function"==typeof e},w.isPlainObject=function(e){return"object"==typeof e&&null!=e&&!(e instanceof Array)},w.isArray=function(e){return"object"==typeof e&&e instanceof Array},w.isNumber=function(e,t){return"number"==typeof e&&(!w.param(t,!1)||0<e)},w.isString=function(e,t){return"string"==typeof e&&(!w.param(t,!1)||""!==e)},w.getAttributeString=function(e,t){var i=e.attr(t);return void 0===i||!1===i||""===i?"":i},w.indexOf=function(e,t,i){if(i=i||!1,t instanceof Array)for(var o=0;o<t.length;o++)if(i){if(t[o]===e)return o}else if(t[o]==e)return o;return-1},w.trim=function(e){return w.isString(e)?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):e},w.getInlineStyle=function(e,t){var i=w.getAttributeString(e,"style");if(t&&i){var o=new RegExp("(^|;)\\s*"+w.regexEscape(t)+"\\s*:");if(i.match(o))return e.css(t)}return""},w.splitOutside=function(e,t,i,o){void 0===i&&(i=""),void 0===o&&(o=i),i instanceof Array||(i=[i]),o instanceof Array||(o=[o]);for(var n=[],s=t.split(e),a=!1,p=0,r=i[p],l=o[p],c=0;c<s.length;c++){for(var _=!1,g=0;g<i.length;g++){r=i[g],l=o[p];var m=r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),d=l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),u=s[c].match(new RegExp("["+m+"][^"+d+"]*")),h=s[c].match(new RegExp("[^"+m+"]*["+d+"]"));!1!==a?g===p&&(a+=s[c],h?(n.push(a),a=!1):a+=e,_=!0):u&&(a=s[c]+e,p=g<o.length?g:0,_=!0)}_||n.push(s[c])}return n},w.elementPaddingWidth=function(e,t){return e&&e.length?e.outerWidth(!!w.param(t,!1))-e.width():0},w.elementPaddingHeight=function(e,t){return e&&e.length?e.outerHeight(!!w.param(t,!1))-e.height():0},w.transition=function(n,e,i,t,o,s){e=w.param(e,{}),i=w.param(i,w._speeds._default),t=w.param(t,w._eases._default),s=!!w.isString(s,!0)&&s;var a,p=[],r=!1,l=!1,c=w._next_transition_id;if(w._next_transition_id++,w._support.transition_end&&25<i){for(a in e)if(e.hasOwnProperty(a)){p.push(a+" "+i+"ms "+t);var _=n.css(a),g=e[a],m=["width","height","top","right","bottom","left"];w.isString(_,!0)&&(_=_.trim()).match(/^[0-9]+(?:\.[0-9]+)?\s*.{0,4}$/)&&(_=parseFloat(_)),w.isString(g,!0)&&(g=g.trim()).match(/^[0-9]+(?:\.[0-9]+)?\s*.{0,4}$/)&&(g=parseFloat(g)),w.isNumber(_,!0)&&(_=Math.ceil(_*(-1<w.indexOf(a,m)?1:100))),w.isNumber(g,!0)&&(g=Math.ceil(g*(-1<w.indexOf(a,m)?1:100))),w.isNumber(_)&&w.isNumber(g)?(1<_-g||1<g-_)&&(r=!0):_!==g&&(r=!0)}for(var d=w.splitOutside(",",n.css("transition"),"(",")"),u=0;u<d.length;u++){var h=w.trim(d[u]),b=!1;if(h&&!h.match(/all 0(?:\.[0]+)?[^0-9]/)){for(a in e)if(e.hasOwnProperty(a)&&w.isString(a,!0)&&d[u].match(new RegExp(w.regexEscape(a)))){b=!0;break}b||(p.push(h),r=!0)}}var f=n.hasClass("popbox-animating");p.length&&r&&(n.off(".popbox_auto_transition_end"),w.transitionAddCallback(n,o,s),n.css("transition",p.join(", ")),n.css(e).addClass("popbox-animating"),n.data("popbox-transition-id",c),setTimeout(function(){var o=!1,t=function(){if(n.data("popbox-transition-id")===c){!1!==o&&(clearTimeout(o),o=!1),n.off(".popbox_auto_transition_end"),n.css("transition","").removeClass("popbox-animating");var e=n.data("popbox-transition-end-functions");if(e&&(e=$.extend({},e),n.data("popbox-transition-id",!1),w.clearTransition(n)),e)for(var t in e)if(e.hasOwnProperty(t))for(var i=0;i<e[t].length;i++)w.isFunction(e[t][i])&&e[t][i]()}};n.off(".popbox_auto_transition_end").on(w._support.transition_end+".popbox_auto_transition_end",function(e){e.stopPropagation(),t()}),o=setTimeout(function(){o=!1,t()},i+50)},0),l=!0)}l||(n.css(e),f?w.transitionAddCallback(n,o,s):w.isFunction(o)&&setTimeout(function(){o()},0))},w.transitionAddCallback=function(e,t,i){if(i=w.isString(i,!0)?i:"_default",e.length&&w.isFunction(t)){var o=e.data("popbox-transition-end-functions");o&&o[i]?o[i].push(t):o?o[i]=[t]:(o={})[i]=[t],e.data("popbox-transition-end-functions",o)}},w.clearTransition=function(e,t){if(t=!!w.isString(t,!0)&&t){var i=e.data("popbox-transition-end-functions");i&&i[t]&&(delete i[t],e.data("popbox-transition-end-functions",i))}else e.data("popbox-transition-end-functions",!1)},w.getTrueWidth=function(e){return e&&e.length?e.get(0).getBoundingClientRect().right-e.get(0).getBoundingClientRect().left:0},w.getTrueHeight=function(e){return e&&e.length?e.get(0).getBoundingClientRect().bottom-e.get(0).getBoundingClientRect().top:0},w.offTouchClick=function(e){e.length&&e.off(".Popbox_touch_click")},w.onTouchClick=function(e,t,i,o){if(e.length){var n="Popbox_touch_click";o&&e.on("click."+n,function(e){e.preventDefault()}),e.on("mousedown."+n+" touchstart."+n,t,function(t){(t.originalEvent.touches||1===t.which)&&$(this).off("mouseup."+n+" touchend."+n).on("mouseup."+n+" touchend."+n,function(e){(t.originalEvent.touches||1===t.which)&&(o&&e.preventDefault(),w.isFunction(i)&&i.call(this,e))})})}},i.prototype.reset=function(){var e=this.self;e._private.triggerHook("reset"),e.trigger("reset"),!1!==e.properties.disable_background_click_timer&&clearTimeout(e.properties.disable_background_click_timer),e.properties={is_open:!1,is_loading:!1,is_changing_state:!1,disable_background_click:!1,disable_background_click_timer:!1,image_cache:{},interface_image_cache_pending:0,content_image_cache_pending:0,last_html_overflow:!1,last_html_margin_right:!1,instance_id:e.properties.instance_id,events:e.properties.events},e.elements={$popbox:null,$popbox_loading:null,$popbox_popup:null,$popbox_empty:null,$popbox_wrapper:null,$popbox_container:null,$popbox_title:null,$popbox_close:null,$popbox_content:null,$popbox_overlay:e.elements.$popbox_overlay},e._private.triggerHook("after_reset"),e.trigger("after_reset")},i.prototype.createOverlay=function(){var i=this.self,e=i.settings.container?$(i.settings.container):w.$body,t=e.children(".popbox-overlay");t.length?i.elements.$popbox_overlay=t:i.elements.$popbox_overlay=$("<div/>",{class:"popbox-overlay",css:{display:"none",position:"fixed",top:"0",right:"0",bottom:"0",left:"0"}}).data("is_open",!1).appendTo(e),i.elements.$popbox_overlay.html(i.settings.overlay_text),i.elements.$popbox_overlay.off("click.popbox_overlay_close").on("click.popbox_overlay_close",function(e){for(var t in e.preventDefault(),w._instances)w._instances.hasOwnProperty(t)&&w._instances[t]instanceof o&&w._instances[t].isOpen()&&w._instances[t].close();i._private.closeOverlay()})},i.prototype.destroyOverlay=function(){var e=this.self;w._instances.length<=0&&e.elements.$popbox_overlay&&(e.elements.$popbox_overlay.remove(),e.elements.$popbox_overlay=null)},i.prototype.openOverlay=function(){var e=this.self;e.elements.$popbox_overlay||e._private.createOverlay(),!1===e.elements.$popbox_overlay.data("is_open")&&(e.elements.$popbox_overlay.css({display:"block",opacity:"0"}),w.clearTransition(e.elements.$popbox_overlay),w.transition(e.elements.$popbox_overlay,{opacity:"1"},e._private.getOverlayAnimationSpeed("open"),e._private.getOverlayAnimationEase("open")),e.elements.$popbox_overlay.data("is_open",!0))},i.prototype.closeOverlay=function(){var e=this.self;e.elements.$popbox_overlay&&(!0===e.elements.$popbox_overlay.data("is_open")?(w.clearTransition(e.elements.$popbox_overlay),w.transition(e.elements.$popbox_overlay,{opacity:"0"},e._private.getOverlayAnimationSpeed("close"),e._private.getOverlayAnimationEase("close"),function(){e.elements.$popbox_overlay&&e.elements.$popbox_overlay.css({display:"none"}),e._private.destroyOverlay()}),e.elements.$popbox_overlay.data("is_open",!1)):e.elements.$popbox_overlay.hasClass("popbox-animating")||e._private.destroyOverlay())},i.prototype.getAnimationStartProperties=function(e){var t=this.self;return w.isSet(t.animations[t.settings.animation])?t.animations[t.settings.animation][e][0]:t.animations.fade[e][0]},i.prototype.getAnimationEndProperties=function(e){var t=this.self;return w.isSet(t.animations[t.settings.animation])?t.animations[t.settings.animation][e][t.animations[t.settings.animation][e].length-1]:t.animations.fade[e][t.animations.fade[e].length-1]},i.prototype.getAnimationSpeed=function(e){var t=this.self;return t.settings[e+"_animation_speed"]||t.settings.animation_speed||w._speeds._default},i.prototype.getAnimationEase=function(e){var t=this.self;return t.settings[e+"_animation_ease"]||t.settings.animation_ease||w._eases._default},i.prototype.getOverlayAnimationSpeed=function(e){var t=this.self;return!0===t.settings[e+"_overlay_animation_speed"]?t._private.getAnimationSpeed(e):t.settings[e+"_overlay_animation_speed"]||t.settings.overlay_animation_speed||t._private.getAnimationSpeed(e)},i.prototype.getOverlayAnimationEase=function(e){var t=this.self;return!0===t.settings[e+"_overlay_animation_ease"]?t._private.getAnimationEase(e):t.settings[e+"_overlay_animation_ease"]||t.settings.overlay_animation_ease||t._private.getAnimationEase(e)},i.prototype.checkImagesLoaded=function(){var i=this.self;if(i.isCreated()){i.properties.content_image_cache_pending=0,i.properties.interface_image_cache_pending=0,i.elements.$popbox.find("img").each(function(){var e=this,t=$(this);e.src&&(e.complete&&w.isNumber(e.naturalWidth,!1)||4===e.readyState||"complete"===e.readyState||i.properties.image_cache[e.src]||(i.properties.image_cache[e.src]={origin:e,$origin:t,proxy:!1,loaded:!1,type:0<t.closest(i.elements.$popbox_content).length?"content":"interface"}))});var o=function(e){"content"===e?(i.properties.content_image_cache_pending--,i.properties.content_image_cache_pending<=0&&(i.properties.content_image_cache_pending=0,i.isChangingState()&&i.elements.$popbox_popup.hasClass("popbox-animating")?w.transitionAddCallback(i.elements.$popbox_popup,function(){i.adjust(!0)}):i.adjust(!0))):(i.properties.interface_image_cache_pending--,i.properties.interface_image_cache_pending<=0&&(i.properties.interface_image_cache_pending=0))};for(var e in i.properties.image_cache)i.properties.image_cache.hasOwnProperty(e)&&(i.properties.image_cache[e].proxy?i.properties.image_cache[e].loaded||("content"===i.properties.image_cache[e].type?i.properties.content_image_cache_pending++:i.properties.interface_image_cache_pending++):function(e){var t=new Image;"content"===i.properties.image_cache[e].type?i.properties.content_image_cache_pending++:i.properties.interface_image_cache_pending++,(i.properties.image_cache[e].proxy=t).onload=function(){i.properties.image_cache[e].loaded||(i.properties.image_cache[e].loaded=!0,o(i.properties.image_cache[e].type),i._private.triggerHook("image_load",[e]),i.trigger("image_load",!1,[e]))},t.onerror=function(){i.properties.image_cache[e].loaded||(i.properties.image_cache[e].loaded=!0,o(i.properties.image_cache[e].type),i._private.triggerHook("image_error",[e]),i.trigger("image_error",!1,[e]))},t.src=e}(e));if(0===i.properties.content_image_cache_pending&&0===i.properties.interface_image_cache_pending)return!0}return!1},i.prototype.applyDomSettings=function(){var e=this.self;if(e.isCreated()){e._private.triggerHook("update_dom"),e.trigger("update_dom"),e.elements.$popbox.attr("class","").addClass("popbox"),e.elements.$popbox_loading.html(e.settings.loading_text),e.elements.$popbox_close.html(e.settings.close_text),e.elements.$popbox_overlay.html(e.settings.overlay_text),e.elements.$popbox_title.html(e.settings.title),w.isFunction(e.settings.content.appendTo)?(e.elements.$popbox_content.html(""),e.settings.content.appendTo(e.elements.$popbox_content)):e.elements.$popbox_content.html(e.settings.content),w.isString(e.settings.add_class,!0)&&e.elements.$popbox.addClass(e.settings.add_class),e.settings.aspect_fit?e.elements.$popbox.addClass("popbox-aspect-fit"):e.elements.$popbox.removeClass("popbox-aspect-fit"),!1===e.settings.close_text?e.elements.$popbox_close.css("display","none"):e.elements.$popbox_close.css("display","block"),!1===e.settings.title?e.elements.$popbox_title.css("display","none"):e.elements.$popbox_title.css("display","block"),w.isNumber(e.settings.z_index,!0)&&(e.elements.$popbox_overlay.css("z-index",e.settings.z_index),e.elements.$popbox.css("z-index",e.settings.z_index+1),e.elements.$popbox_popup.css("z-index",e.settings.z_index+2));var t={mobile:navigator.userAgent.match(/(iPad|iPhone|iPod|Android)/g),ios:navigator.userAgent.match(/(iPad|iPhone|iPod)/g),android:navigator.userAgent.match(/(Android)/g)};!0===e.settings.absolute||w.isString(e.settings.absolute)&&t[e.settings.absolute]?e.elements.$popbox.css({position:"absolute","overflow-y":"visible","overflow-x":"visible"}):e.elements.$popbox.css({position:"fixed","overflow-y":"scroll","overflow-x":"hidden"}),e._private.triggerHook("after_update_dom"),e.trigger("after_update_dom")}},i.prototype.triggerHook=function(e,t){var i=this.self;if(t=w.isArray(t)?t:[],w.isPlainObject(i.hooks)&&w.isArray(i.hooks[e]))for(var o=0;o<i.hooks[e].length;o++)w.isFunction(i.hooks[e][o])&&i.hooks[e][o].apply(i,t)};var o=function(e){var t=this;t._private=new i,(t._private.self=t)._private.triggerHook("initialize",[e]),t.settings=$.extend(!0,{},t.default_settings,w.param(e,{})),t.properties={instance_id:w._next_instance_id,events:{}},t.elements={$popbox_overlay:null},t._private.reset(),w._next_instance_id++,t.trigger("initialize",!1,[e]),t._private.triggerHook("after_initialize",[e]),t.trigger("after_initialize",!1,[e])};o.prototype.version="3.0.9",o.prototype.plugins={},o.prototype.default_settings={width:!1,height:!1,min_width:100,min_height:100,max_width:!1,max_height:!1,container:!1,animation:"fade",animation_speed:w._speeds._default,animation_ease:w._eases._default,open_animation:null,open_animation_speed:null,open_animation_ease:null,close_animation:null,close_animation_speed:null,close_animation_ease:null,overlay_animation_speed:null,overlay_animation_ease:null,open_overlay_animation_speed:null,open_overlay_animation_ease:null,close_overlay_animation_speed:null,close_overlay_animation_ease:null,content:"",title:!1,close_text:"X",overlay_text:"",loading_text:"Loading",hide_page_scroll:!0,hide_page_scroll_space:!0,content_additional_offset:!1,absolute:"mobile",add_class:"",aspect_fit:!1,aspect_fit_round:!1,cache:!1,wait_for_images:!0,width_margin:.1,height_margin:.08,z_index:99900,mode:!1,open:!1,after_open:!1,close:!1,after_close:!1},o.prototype._static=w,o.prototype.animations={fade:{open:[{opacity:"0"},{opacity:"1"}],close:[{opacity:"1"},{opacity:"0"}]}},o.prototype.hooks={},w.addHook=function(e,t){w.isArray(o.prototype.hooks[e])||(o.prototype.hooks[e]=[]),o.prototype.hooks[e].push(t)},o.prototype.create=function(){var s=this;s.destroy(),s._private.triggerHook("create"),s._private.createOverlay();var e=s.settings.container?$(s.settings.container):w.$body;s.elements.$popbox=$("<div/>",{class:"popbox",css:{display:"none",position:"fixed",width:"100%",height:"100%",top:"0px",left:"0px","overflow-y":"scroll","overflow-x":"hidden"}}),s.elements.$popbox_empty=$("<div/>",{class:"popbox-empty",css:{display:"block",position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}}).appendTo(s.elements.$popbox),s.elements.$popbox_popup=$("<div/>",{class:"popbox-popup",css:{display:"none",position:"absolute",top:"50%",left:"50%",bottom:"auto",right:"auto",width:"0px",height:"0px"}}).appendTo(s.elements.$popbox),s.elements.$popbox_loading=$("<div/>",{class:"popbox-loading",css:{display:"none"}}).appendTo(s.elements.$popbox_popup),s.elements.$popbox_wrapper=$("<div/>",{class:"popbox-wrapper"}).appendTo(s.elements.$popbox_popup),s.elements.$popbox_container=$("<div/>",{class:"popbox-container"}).appendTo(s.elements.$popbox_wrapper),s.elements.$popbox_title=$("<div/>",{class:"popbox-title"}).appendTo(s.elements.$popbox_container),s.elements.$popbox_content=$("<div/>",{class:"popbox-content"}).appendTo(s.elements.$popbox_container),s.elements.$popbox_close=$("<a/>",{class:"popbox-close",href:"javascript:void(0);"}).appendTo(s.elements.$popbox_container),s._private.applyDomSettings();var t=w._event_namespace+"Close";s.elements.$popbox.off("click."+t).on("click."+t,".popbox-close,.close-popbox",function(e){e.preventDefault(),s.close()});var i=w._event_namespace+"ComplexCloseStart",a=w._event_namespace+"ComplexClose";s.elements.$popbox.on("mousedown."+i+" touchstart."+i,function(t){var o=t.originalEvent.touches&&t.originalEvent.touches[0]?t.originalEvent.touches[0].pageX:t.pageX,n=t.originalEvent.touches&&t.originalEvent.touches[0]?t.originalEvent.touches[0].pageY:t.pageY;(t.originalEvent.touches||1===t.which)&&0===$(t.target).closest(".popbox-popup").length&&o<s.elements.$popbox_empty.width()&&(s.elements.$popbox.off("."+a),s.elements.$popbox.on("mouseup."+a+" touchend."+a,function(e){if((e.originalEvent.touches||1===e.which)&&(s.elements.$popbox.off("."+a),!s.properties.disable_background_click&&t.target===e.target&&0===$(e.target).closest(".popbox-popup").length))return e.preventDefault(),s.close(),!1}),s.elements.$popbox.on("mousemove."+a+" touchmove."+a,function(e){var t=e.originalEvent.touches&&e.originalEvent.touches[0]?e.originalEvent.touches[0].pageX:e.pageX,i=e.originalEvent.touches&&e.originalEvent.touches[0]?e.originalEvent.touches[0].pageY:e.pageY;(t<o-5||o+5<t||i<n-5||n+5<i)&&s.elements.$popbox.off("."+a)}),s.elements.$popbox.on("scroll."+a,function(){s.elements.$popbox.off("."+a)}))}),s.elements.$popbox.appendTo(e),w._instances[s.properties.instance_id]=s,w._instances.length++,s._private.triggerHook("after_create")},o.prototype.destroy=function(){var e=this;e.elements.$popbox&&(e._private.triggerHook("destroy"),e.elements.$popbox.remove(),e.elements.$popbox=null,w.isSet(w._instances[e.properties.instance_id])&&(delete w._instances[e.properties.instance_id],w._instances.length--),e._private.closeOverlay(),e._private.reset(),e._private.triggerHook("after_destroy"))},o.prototype.update=function(e,t){var i=this;t=w.param(t,!0),$.extend(!0,i.settings,w.param(e,{})),i.isCreated()&&(i.isOpen()?t?i.showLoading(function(){i._private.applyDomSettings(),i.adjust(!0)}):(i._private.applyDomSettings(),i.adjust(!1)):i._private.applyDomSettings())},o.prototype.open=function(){var e=this;if(!e.isOpen()){if(e.elements.$popbox?e._private.applyDomSettings():e.create(),e._private.triggerHook("open"),e.trigger("open"),"absolute"===e.elements.$popbox.css("position"))e.elements.$popbox.css("top",w.$window.scrollTop()+"px");else if(e.settings.hide_page_scroll){var t=w.$body.width();!1===e.properties.last_html_overflow&&(e.properties.last_html_overflow=w.getInlineStyle(w.$html,"overflow")),w.$html.addClass("popbox-hide-page-scroll").css("overflow","hidden");var i=w.$body.width();e.settings.hide_page_scroll_space&&(!1===e.properties.last_html_margin_right&&(e.properties.last_html_margin_right=w.getInlineStyle(w.$html,"margin-right")),t<i&&w.$html.css("margin-right",i-t+"px"))}e._private.openOverlay(),e.elements.$popbox_popup.css({display:"block","box-sizing":"content-box"}),e.elements.$popbox.css({display:"block","box-sizing":"content-box"}),e.elements.$popbox_popup.css({visibility:"visible","box-sizing":"content-box"}),e.properties.is_loading||e.showContent(),e.adjust(!1),e.elements.$popbox_popup.css(e._private.getAnimationStartProperties("open")),w.clearTransition(e.elements.$popbox_popup),e.properties.is_changing_state=!0,w.transition(e.elements.$popbox_popup,e._private.getAnimationEndProperties("open"),e._private.getAnimationSpeed("open"),e._private.getAnimationEase("open"),function(){e.properties.is_changing_state=!1}),e.elements.$popbox_popup.hasClass("popbox-animating")&&(e.properties.disable_background_click=!0,e.properties.disable_background_click_timer=setTimeout(function(){e.properties.disable_background_click=!1,e.properties.disable_background_click_timer=!1},e._private.getAnimationSpeed("open")+200)),e.properties.is_open=!0,e._private.triggerHook("after_open"),e.trigger("after_open")}},o.prototype.close=function(e){var t=this;if(t.isOpen()){for(var i in t._private.triggerHook("close"),t.trigger("close"),t.properties.is_open=!1,t.elements)t.elements.hasOwnProperty(i)&&t.elements[i].length&&w.clearTransition(t.elements[i]);t.elements.$popbox_popup.css(t._private.getAnimationStartProperties("close")),t.properties.is_changing_state=!0,w.transition(t.elements.$popbox_popup,t._private.getAnimationEndProperties("close"),t._private.getAnimationSpeed("close"),t._private.getAnimationEase("close"),function(){t.properties.is_changing_state=!1,t.elements.$popbox.css({display:"none"}),!1!==t.properties.last_html_overflow&&w.$html.css("overflow",t.properties.last_html_overflow),!1!==t.properties.last_html_margin_right&&w.$html.css("margin-right",t.properties.last_html_margin_right),t.properties.last_html_overflow=!1,t.properties.last_html_margin_right=!1,w.$html.removeClass("popbox-hide-page-scroll"),e||!t.settings.cache?t.destroy():(t.elements.$popbox_popup.css(t._private.getAnimationEndProperties("open")),(t.properties.disable_background_click=!1)!==t.properties.disable_background_click_timer&&(clearTimeout(t.properties.disable_background_click_timer),t.properties.disable_background_click_timer=!1)),t._private.triggerHook("after_close"),t.trigger("after_close")})}t._private.closeOverlay()},o.prototype.adjust=function(e){var y=this;if(e=w.param(e,!0),y.isCreated()){var t=function(e,t){e=w.param(e,!1),t=w.param(t,!1);var i,s,o,n,a=y.elements.$popbox_empty.width(),p=w.$window.height(),r=w.elementPaddingWidth(y.elements.$popbox_popup),l=w.elementPaddingHeight(y.elements.$popbox_popup),c=w.elementPaddingWidth(y.elements.$popbox_content,!0),_=w.elementPaddingHeight(y.elements.$popbox_content,!0),g=(0<y.settings.width_margin?a-a*(2*y.settings.width_margin):a)-r,m=(0<y.settings.height_margin?p-p*(2*y.settings.height_margin):p)-l,d=0,u=0,h=w.isNumber(y.settings.width)?y.settings.width+"px":"auto",b=w.isNumber(y.settings.height)?y.settings.height+"px":"auto",f=m;w.isNumber(y.settings.max_width,!0)&&g>y.settings.max_width&&(g=y.settings.max_width),w.isNumber(y.settings.max_height,!0)&&m>y.settings.max_height&&(m=y.settings.max_height),w.isNumber(y.settings.min_width,!0)&&d<y.settings.min_width&&(d=y.settings.min_width),w.isNumber(y.settings.min_height,!0)&&u<y.settings.min_height&&(u=y.settings.min_height),y.elements.$popbox_content.css({height:"","overflow-y":"","box-sizing":"content-box"}),y.elements.$popbox_wrapper.css({position:"relative",top:"0px",left:"0px",width:y.settings.aspect_fit?"99999px":g+"px",height:y.settings.aspect_fit?"99999px":"1px",overflow:"hidden","box-sizing":"content-box"}),y.elements.$popbox_container.css({position:"absolute",top:"0px",left:"0px",width:h,height:b,"min-width":!0===y.settings.min_width?"100%":d+"px","min-height":!0===y.settings.min_height?"100%":u+"px","max-width":"100%","box-sizing":"content-box"}),i=Math.ceil(100*w.getTrueWidth(y.elements.$popbox_container))/100,s=Math.ceil(100*w.getTrueHeight(y.elements.$popbox_container))/100;var v=function(e){e=e||!1;var t=s-_,i=y.settings.content_additional_offset;if(t-=y.elements.$popbox_content.offset().top-y.elements.$popbox_container.offset().top,w.isNumber(i)?t+=i:i=[i],i instanceof Array)for(var o=0;o<i.length;o++)if(w.isString(i[o],!0)){var n=0;$(i[o]).each(function(){var e=$(this),t=e.offset().top+e.outerHeight(!0)-(y.elements.$popbox_content.offset().top+y.elements.$popbox_content.outerHeight(!0));0<t&&n<t&&(n=t)})}y.elements.$popbox_content.css({height:e?Math.floor(t)+"px":t+"px","overflow-x":"hidden","overflow-y":e?"scroll":"hidden"})};y.settings.aspect_fit?(g<i||m<s)&&((m-_)/(g-c)<(s-_)/(i-c)?(i=(m-_)/(s-_)*(i-c)+c,s=m):(s=(g-c)/(i-c)*(s-_)+_,i=g),y.settings.aspect_fit_round&&(i=Math.round(i),s=Math.round(s)),v(!1)):(!0===y.settings.max_height||w.isNumber(y.settings.max_height,!0))&&m<s?(s=m,v(!0)):v(!1);var x=function(){y.elements.$popbox_wrapper.css({position:"",top:"",left:"",width:"",height:"",overflow:""}),y.elements.$popbox_container.css({position:"",top:"",left:"",width:"",height:"","min-width":"","min-height":"","max-width":""})};n=(a-(i+r))/2,o=(p-(s+l))/2,f<s&&(o=0<y.settings.height_margin?p*y.settings.height_margin:0),e?(w.clearTransition(y.elements.$popbox_popup,"adjust"),w.transition(y.elements.$popbox_empty,{height:Math.floor(s+l+2*o-1)+"px"},w._speeds.fast,w._eases.easeInOutQuad),w.transition(y.elements.$popbox_popup,{width:i+"px",height:s+"px",top:o+"px",left:n+"px"},w._speeds.fast,w._eases.easeInOutQuad,function(){x(),t&&y.showContent()},"adjust")):(x(),y.elements.$popbox_popup.css({width:i+"px",height:s+"px",top:o+"px",left:n+"px"}),y.elements.$popbox_empty.css({height:Math.floor(s+l+2*o-1)+"px"}))};y._private.checkImagesLoaded(),y.settings.wait_for_images&&0<y.properties.content_image_cache_pending?y.showLoading(function(){e||t(e,!1)}):e?y.showLoading(function(){t(e,!0)}):t(!1,!0)}},o.prototype.showLoading=function(e){var t=this;if(t.isCreated()){if(t.isLoading())return void(t.elements.$popbox_loading.hasClass("popbox-animating")||t.elements.$popbox_wrapper.hasClass("popbox-animating")||!w.isFunction(e)||e());t.isOpen()?(w.clearTransition(t.elements.$popbox_loading),w.clearTransition(t.elements.$popbox_wrapper),w.transition(t.elements.$popbox_wrapper,{opacity:"0"},w._speeds.fast,"linear",function(){t.elements.$popbox_wrapper.css({visibility:"hidden"}),t.elements.$popbox_loading.css({opacity:"0",display:"block"}),w.transition(t.elements.$popbox_loading,{opacity:"1"},w._speeds.fast,"linear",function(){w.isFunction(e)&&e()})})):(t.elements.$popbox_wrapper.css({opacity:"0",visibility:"hidden"}),t.elements.$popbox_loading.css({opacity:"1",display:"block"}),w.isFunction(e)&&e()),t.properties.is_loading=!0}},o.prototype.showContent=function(e){var t=this;if(t.isCreated()){if(!t.isLoading())return void(t.elements.$popbox_popup.hasClass("popbox-animating")||t.elements.$popbox_loading.hasClass("popbox-animating")||t.elements.$popbox_wrapper.hasClass("popbox-animating")||!w.isFunction(e)||e());t.isOpen()?(w.clearTransition(t.elements.$popbox_loading),w.clearTransition(t.elements.$popbox_wrapper),w.transition(t.elements.$popbox_loading,{opacity:"0"},w._speeds.fast,"linear",function(){t.elements.$popbox_loading.css({display:"none"}),t.elements.$popbox_wrapper.css({opacity:"0",visibility:"visible"}),w.transition(t.elements.$popbox_wrapper,{opacity:"1"},w._speeds.fast,"linear",function(){w.isFunction(e)&&e()})})):(t.elements.$popbox_loading.css({display:"none",opacity:"0"}),t.elements.$popbox_wrapper.css({opacity:"1",visibility:"visible"}),w.isFunction(e)&&e()),t.properties.is_loading=!1}},o.prototype.isLoading=function(){return this.properties.is_loading},o.prototype.isOpen=function(){return this.properties.is_open},o.prototype.isChangingState=function(){return this.properties.is_changing_state},o.prototype.isCreated=function(){return!!this.elements.$popbox},o.prototype.on=function(e,t){var i=this,o=e.split(".",2);if(o.length){var n=o[0],s=o[1]?o[1]:"_default";w.isPlainObject(i.properties.events[n])||(i.properties.events[n]={}),w.isArray(i.properties.events[n][s])||(i.properties.events[n][s]=[]),i.properties.events[n][s].push(t)}},o.prototype.off=function(e,t){var i=this,o=e.split(".",2);if(o.length){var n=o[0],s=!!o[1]&&o[1];if(w.isPlainObject(i.properties.events[n]))for(var a in i.properties.events[n])if(i.properties.events[n].hasOwnProperty(a)&&w.isArray(i.properties.events[n][a])&&(!1===s||s===a))if(w.isFunction(t))for(var p=0;p<i.properties.events[n][a].length;p++)i.properties.events[n][a][p]===t&&(i.properties.events[n][a].splice(p,1),p--);else i.properties.events[n][a]=[]}},o.prototype.trigger=function(e,t,i){var o=this;i=w.isArray(i)?i:[];var n=e.split(".",2);if(n.length){var s=n[0],a=!!n[1]&&n[1];if(w.isFunction(o.settings[s])&&o.settings[s](),w.isPlainObject(o.properties.events[s]))for(var p in o.properties.events[s])if(o.properties.events[s].hasOwnProperty(p)&&w.isArray(o.properties.events[s][p])&&(!1===a||a===p))for(var r=0;r<o.properties.events[s][p].length;r++)!w.isFunction(o.properties.events[s][p][r])||w.isFunction(t)&&o.properties.events[s][p][r]!==t||o.properties.events[s][p][r].apply(o,i)}},w.$window.on("resize."+w._event_namespace,function(){if(0<w._instances.length)for(var e in w._instances)w._instances.hasOwnProperty(e)&&w._instances[e]instanceof o&&w._instances[e].isOpen()&&w._instances[e].adjust(!1)}),$.Popbox=o}(jQuery,window);