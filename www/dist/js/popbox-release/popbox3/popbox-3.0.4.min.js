!function(a,b){function c(a){if(a in e._test_div.style)return a;for(var b=["Moz","Webkit","O","ms"],c=a.charAt(0).toUpperCase()+a.substr(1),d=0;d<b.length;++d){var f=b[d]+c;if(f in e._test_div.style)return f}}var d=function(){},e={$window:a(b),$html:a("html"),$body:a("body"),_event_namespace:"Popbox",_next_instance_id:0,_next_transition_id:0,_instances:{length:0},_support:{},_speeds:{_default:300,fast:300,medium:600,slow:1e3},_eases:{_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},_transition_end_event_names:{transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},_test_div:document.createElement("div")};e._support.transition=c("transition"),e._support.transform=c("transform"),e._support.transform_origin=c("transformOrigin"),e._support.transition_end=e._transition_end_event_names[e._support.transition]||null,e._test_div=null,e.param=function(a,b){return void 0!==a?a:b},e.regexEscape=function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},e.isSet=function(a){return void 0!==a},e.isFunction=function(a){return"function"==typeof a},e.isPlainObject=function(a){return"object"==typeof a&&null!=a&&!(a instanceof Array)},e.isArray=function(a){return"object"==typeof a&&a instanceof Array},e.isNumber=function(a,b){return"number"==typeof a&&(!e.param(b,!1)||a>0)},e.isString=function(a,b){return"string"==typeof a&&(!e.param(b,!1)||""!=a)},e.getAttributeString=function(a,b){var c=a.attr(b);return void 0===c||!1===c||""===c?"":c},e.indexOf=function(a,b,c){if(c=c||!1,b instanceof Array)for(var d=0;d<b.length;d++)if(c){if(b[d]===a)return d}else if(b[d]==a)return d;return-1},e.trim=function(a){return e.isString(a)?a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):a},e.getInlineStyle=function(a,b){var c=e.getAttributeString(a,"style");if(b&&c){var d=new RegExp("(^|;)\\s*"+e.regexEscape(b)+"\\s*:");if(c.match(d))return a.css(b)}return""},e.splitOutside=function(a,b,c,d){void 0===c&&(c=""),void 0===d&&(d=c),c instanceof Array||(c=[c]),d instanceof Array||(d=[d]);for(var e=[],f=b.split(a),g=!1,h=0,i=c[h],j=d[h],k=0;k<f.length;k++){for(var l=!1,m=0;m<c.length;m++){i=c[m],j=d[h];var n=i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),o=j.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),p=f[k].match(new RegExp("["+n+"][^"+o+"]*")),q=f[k].match(new RegExp("[^"+n+"]*["+o+"]"));!1!==g?m==h&&(g+=f[k],q?(e.push(g),g=!1):g+=a,l=!0):p&&(g=f[k]+a,h=m<d.length?m:0,l=!0)}l||e.push(f[k])}return e},e.elementPaddingWidth=function(a,b){return a&&a.length?a.outerWidth(!!e.param(b,!1))-a.width():0},e.elementPaddingHeight=function(a,b){return a&&a.length?a.outerHeight(!!e.param(b,!1))-a.height():0},e.transition=function(b,c,d,f,g,h){c=e.param(c,{}),d=e.param(d,e._speeds._default),f=e.param(f,e._eases._default),h=!!e.isString(h,!0)&&h;var i,j=[],k=!1,l=!1,m=e._next_transition_id;if(e._next_transition_id++,e._support.transition_end&&d>25){for(i in c)if(c.hasOwnProperty(i)){j.push(i+" "+d+"ms "+f);var n=b.css(i),o=c[i],p=["width","height","top","right","bottom","left"];e.isString(n,!0)&&(n=n.trim(),n.match(/^[0-9]+(?:\.[0-9]+)?\s*.{0,4}$/)&&(n=parseFloat(n))),e.isString(o,!0)&&(o=o.trim(),o.match(/^[0-9]+(?:\.[0-9]+)?\s*.{0,4}$/)&&(o=parseFloat(o))),e.isNumber(n,!0)&&(n=Math.ceil(n*(e.indexOf(i,p)>-1?1:100))),e.isNumber(o,!0)&&(o=Math.ceil(o*(e.indexOf(i,p)>-1?1:100))),e.isNumber(n)&&e.isNumber(o)?(n-o>1||o-n>1)&&(k=!0):n!=o&&(k=!0)}for(var q=e.splitOutside(",",b.css("transition"),"(",")"),r=0;r<q.length;r++){var s=e.trim(q[r]),t=!1;if(s&&!s.match(/all 0(?:\.[0]+)?[^0-9]/)){for(i in c)if(c.hasOwnProperty(i)&&e.isString(i,!0)&&q[r].match(new RegExp(e.regexEscape(i)))){t=!0;break}t||(j.push(s),k=!0)}}var u=b.hasClass("popbox-animating");j.length&&k&&(b.off(".popbox_auto_transition_end"),e.transitionAddCallback(b,g,h),b.css("transition",j.join(", ")),b.css(c).addClass("popbox-animating"),b.data("popbox-transition-id",m),setTimeout(function(){var c=!1,f=function(){if(b.data("popbox-transition-id")===m){!1!==c&&(clearTimeout(c),c=!1),b.off(".popbox_auto_transition_end"),b.css("transition","").removeClass("popbox-animating");var d=b.data("popbox-transition-end-functions");if(d&&(d=a.extend({},d),b.data("popbox-transition-id",!1),e.clearTransition(b)),d)for(var f in d)if(d.hasOwnProperty(f))for(var g=0;g<d[f].length;g++)e.isFunction(d[f][g])&&d[f][g]()}};b.off(".popbox_auto_transition_end").on(e._support.transition_end+".popbox_auto_transition_end",function(a){a.stopPropagation(),f()}),c=setTimeout(function(){c=!1,f()},d+50)},0),l=!0)}l||(b.css(c),u?e.transitionAddCallback(b,g,h):e.isFunction(g)&&setTimeout(function(){g()},0))},e.transitionAddCallback=function(a,b,c){if(c=e.isString(c,!0)?c:"_default",a.length&&e.isFunction(b)){var d=a.data("popbox-transition-end-functions");d&&d[c]?d[c].push(b):d?d[c]=[b]:(d={},d[c]=[b]),a.data("popbox-transition-end-functions",d)}},e.clearTransition=function(a,b){if(b=!!e.isString(b,!0)&&b){var c=a.data("popbox-transition-end-functions");c&&c[b]&&(delete c[b],a.data("popbox-transition-end-functions",c))}else a.data("popbox-transition-end-functions",!1)},e.getTrueWidth=function(a){return a&&a.length?a.get(0).getBoundingClientRect().right-a.get(0).getBoundingClientRect().left:0},e.getTrueHeight=function(a){return a&&a.length?a.get(0).getBoundingClientRect().bottom-a.get(0).getBoundingClientRect().top:0},e.offTouchClick=function(a){a.length&&a.off(".Popbox_touch_click")},e.onTouchClick=function(b,c,d,f){if(b.length){f&&b.on("click.Popbox_touch_click",function(a){a.preventDefault()}),b.on("mousedown.Popbox_touch_click touchstart.Popbox_touch_click",c,function(b){if(b.originalEvent.touches||1==b.which){a(this).off("mouseup.Popbox_touch_click touchend.Popbox_touch_click").on("mouseup.Popbox_touch_click touchend.Popbox_touch_click",function(a){(b.originalEvent.touches||1==b.which)&&(f&&a.preventDefault(),e.isFunction(d)&&d.call(this,a))})}})}},d.prototype.reset=function(){var a=this.self;a._private.triggerHook("reset"),a.trigger("reset"),!1!==a.properties.disable_background_click_timer&&clearTimeout(a.properties.disable_background_click_timer),a.properties={is_open:!1,is_loading:!1,is_changing_state:!1,disable_background_click:!1,disable_background_click_timer:!1,image_cache:{},interface_image_cache_pending:0,content_image_cache_pending:0,last_html_overflow:!1,last_html_margin_right:!1,instance_id:a.properties.instance_id,events:a.properties.events},a.elements={$popbox:null,$popbox_loading:null,$popbox_popup:null,$popbox_empty:null,$popbox_wrapper:null,$popbox_container:null,$popbox_title:null,$popbox_close:null,$popbox_content:null,$popbox_overlay:a.elements.$popbox_overlay},a._private.triggerHook("after_reset"),a.trigger("after_reset")},d.prototype.createOverlay=function(){var b=this.self,c=b.settings.container?a(b.settings.container):e.$body,d=c.children(".popbox-overlay");d.length?b.elements.$popbox_overlay=d:b.elements.$popbox_overlay=a("<div/>",{class:"popbox-overlay",css:{display:"none",position:"fixed",top:"0",right:"0",bottom:"0",left:"0"}}).data("is_open",!1).appendTo(c),b.elements.$popbox_overlay.off("click.popbox_overlay_close").on("click.popbox_overlay_close",function(a){a.preventDefault();for(var c in e._instances)e._instances.hasOwnProperty(c)&&e._instances[c]instanceof f&&e._instances[c].isOpen()&&e._instances[c].close();b._private.closeOverlay()})},d.prototype.destroyOverlay=function(){var a=this.self;e._instances.length<=0&&a.elements.$popbox_overlay&&(a.elements.$popbox_overlay.remove(),a.elements.$popbox_overlay=null)},d.prototype.openOverlay=function(){var a=this.self;a.elements.$popbox_overlay||a._private.createOverlay(),!1===a.elements.$popbox_overlay.data("is_open")&&(a.elements.$popbox_overlay.css({display:"block",opacity:"0"}),e.clearTransition(a.elements.$popbox_overlay),e.transition(a.elements.$popbox_overlay,{opacity:"1"},a._private.getOverlayAnimationSpeed("open"),a._private.getOverlayAnimationEase("open")),a.elements.$popbox_overlay.data("is_open",!0))},d.prototype.closeOverlay=function(){var a=this.self;a.elements.$popbox_overlay&&(!0===a.elements.$popbox_overlay.data("is_open")?(e.clearTransition(a.elements.$popbox_overlay),e.transition(a.elements.$popbox_overlay,{opacity:"0"},a._private.getOverlayAnimationSpeed("close"),a._private.getOverlayAnimationEase("close"),function(){a.elements.$popbox_overlay&&a.elements.$popbox_overlay.css({display:"none"}),a._private.destroyOverlay()}),a.elements.$popbox_overlay.data("is_open",!1)):a.elements.$popbox_overlay.hasClass("popbox-animating")||a._private.destroyOverlay())},d.prototype.getAnimationStartProperties=function(a){var b=this.self;return e.isSet(b.animations[b.settings.animation])?b.animations[b.settings.animation][a][0]:b.animations.fade[a][0]},d.prototype.getAnimationEndProperties=function(a){var b=this.self;return e.isSet(b.animations[b.settings.animation])?b.animations[b.settings.animation][a][b.animations[b.settings.animation][a].length-1]:b.animations.fade[a][b.animations.fade[a].length-1]},d.prototype.getAnimationSpeed=function(a){var b=this.self;return b.settings[a+"_animation_speed"]||b.settings.animation_speed||e._speeds._default},d.prototype.getAnimationEase=function(a){var b=this.self;return b.settings[a+"_animation_ease"]||b.settings.animation_ease||e._eases._default},d.prototype.getOverlayAnimationSpeed=function(a){var b=this.self;return!0===b.settings[a+"_overlay_animation_speed"]?b._private.getAnimationSpeed(a):b.settings[a+"_overlay_animation_speed"]||b.settings.overlay_animation_speed||b._private.getAnimationSpeed(a)},d.prototype.getOverlayAnimationEase=function(a){var b=this.self;return!0===b.settings[a+"_overlay_animation_ease"]?b._private.getAnimationEase(a):b.settings[a+"_overlay_animation_ease"]||b.settings.overlay_animation_ease||b._private.getAnimationEase(a)},d.prototype.checkImagesLoaded=function(){var b=this.self;if(b.isCreated()){b.properties.content_image_cache_pending=0,b.properties.interface_image_cache_pending=0;b.elements.$popbox.find("img").each(function(){var c=this,d=a(this);if(c.src){c.complete&&e.isNumber(c.naturalWidth,!1)||4===c.readyState||"complete"===c.readyState||b.properties.image_cache[c.src]||(b.properties.image_cache[c.src]={origin:c,$origin:d,proxy:!1,loaded:!1,type:d.closest(b.elements.$popbox_content).length>0?"content":"interface"})}});var c=function(a){"content"===a?--b.properties.content_image_cache_pending<=0&&(b.properties.content_image_cache_pending=0,b.isChangingState()&&b.elements.$popbox_popup.hasClass("popbox-animating")?e.transitionAddCallback(b.elements.$popbox_popup,function(){b.adjust(!0)}):b.adjust(!0)):--b.properties.interface_image_cache_pending<=0&&(b.properties.interface_image_cache_pending=0)};for(var d in b.properties.image_cache)b.properties.image_cache.hasOwnProperty(d)&&(b.properties.image_cache[d].proxy?b.properties.image_cache[d].loaded||("content"===b.properties.image_cache[d].type?b.properties.content_image_cache_pending++:b.properties.interface_image_cache_pending++):function(a){var d=new Image;"content"===b.properties.image_cache[a].type?b.properties.content_image_cache_pending++:b.properties.interface_image_cache_pending++,b.properties.image_cache[a].proxy=d,d.onload=function(){b.properties.image_cache[a].loaded||(b.properties.image_cache[a].loaded=!0,c(b.properties.image_cache[a].type),b._private.triggerHook("image_load",[a]),b.trigger("image_load",!1,[a]))},d.onerror=function(){b.properties.image_cache[a].loaded||(b.properties.image_cache[a].loaded=!0,c(b.properties.image_cache[a].type),b._private.triggerHook("image_error",[a]),b.trigger("image_error",!1,[a]))},d.src=a}(d));if(0==b.properties.content_image_cache_pending&&0==b.properties.interface_image_cache_pending)return!0}return!1},d.prototype.applyDomSettings=function(){var a=this.self;if(a.isCreated()){a._private.triggerHook("update_dom"),a.trigger("update_dom"),a.elements.$popbox_loading.html(a.settings.loading_text),a.elements.$popbox_close.html(a.settings.close_text),a.elements.$popbox_title.html(a.settings.title),e.isFunction(a.settings.content.appendTo)?(a.elements.$popbox_content.html(""),a.settings.content.appendTo(a.elements.$popbox_content)):a.elements.$popbox_content.html(a.settings.content),e.isString(a.settings.add_class,!0)&&a.elements.$popbox.addClass(a.settings.add_class),a.settings.aspect_fit?a.elements.$popbox.addClass("popbox-aspect-fit"):a.elements.$popbox.removeClass("popbox-aspect-fit"),!1===a.settings.close_text?a.elements.$popbox_close.css("display","none"):a.elements.$popbox_close.css("display","block"),!1===a.settings.title?a.elements.$popbox_title.css("display","none"):a.elements.$popbox_title.css("display","block"),e.isNumber(a.settings.z_index,!0)&&(a.elements.$popbox_overlay.css("z-index",a.settings.z_index),a.elements.$popbox.css("z-index",a.settings.z_index+1),a.elements.$popbox_popup.css("z-index",a.settings.z_index+2));var b={mobile:navigator.userAgent.match(/(iPad|iPhone|iPod|Android)/g),ios:navigator.userAgent.match(/(iPad|iPhone|iPod)/g),android:navigator.userAgent.match(/(Android)/g)};!0===a.settings.absolute||e.isString(a.settings.absolute)&&b[a.settings.absolute]?a.elements.$popbox.css({position:"absolute","overflow-y":"visible","overflow-x":"visible"}):a.elements.$popbox.css({position:"fixed","overflow-y":"scroll","overflow-x":"hidden"}),a._private.triggerHook("after_update_dom"),a.trigger("after_update_dom")}},d.prototype.triggerHook=function(a,b){var c=this.self;if(b=e.isArray(b)?b:[],e.isPlainObject(c.hooks)&&e.isArray(c.hooks[a]))for(var d=0;d<c.hooks[a].length;d++)e.isFunction(c.hooks[a][d])&&c.hooks[a][d].apply(c,b)};var f=function(b){var c=this;c._private=new d,c._private.self=c,c._private.triggerHook("initialize",[b]),c.settings=a.extend(!0,{},c.default_settings,e.param(b,{})),c.properties={instance_id:e._next_instance_id,events:{}},c.elements={$popbox_overlay:null},c._private.reset(),e._next_instance_id++,c.trigger("initialize",!1,[b]),c._private.triggerHook("after_initialize",[b]),c.trigger("after_initialize",!1,[b])};f.prototype.version="3.0.4",f.prototype.plugins={},f.prototype.default_settings={width:!1,height:!1,min_width:100,min_height:100,max_width:!1,max_height:!1,container:!1,animation:"fade",animation_speed:e._speeds._default,animation_ease:e._eases._default,open_animation:null,open_animation_speed:null,open_animation_ease:null,close_animation:null,close_animation_speed:null,close_animation_ease:null,overlay_animation_speed:null,overlay_animation_ease:null,open_overlay_animation_speed:null,open_overlay_animation_ease:null,close_overlay_animation_speed:null,close_overlay_animation_ease:null,content:"",close_text:"X",title:!1,hide_page_scroll:!0,hide_page_scroll_space:!0,content_additional_offset:!1,loading_text:"Loading",absolute:"mobile",add_class:"",aspect_fit:!1,cache:!1,wait_for_images:!0,width_margin:.1,height_margin:.08,z_index:99900,mode:!1,open:!1,after_open:!1,close:!1,after_close:!1},f.prototype._static=e,f.prototype.animations={fade:{open:[{opacity:"0"},{opacity:"1"}],close:[{opacity:"1"},{opacity:"0"}]}},f.prototype.hooks={},e.addHook=function(a,b){e.isArray(f.prototype.hooks[a])||(f.prototype.hooks[a]=[]),f.prototype.hooks[a].push(b)},f.prototype.create=function(){var b=this;b.destroy(),b._private.triggerHook("create"),b._private.createOverlay();var c=b.settings.container?a(b.settings.container):e.$body;b.elements.$popbox=a("<div/>",{class:"popbox",css:{display:"none",position:"fixed",width:"100%",height:"100%",top:"0px",left:"0px","overflow-y":"scroll","overflow-x":"hidden"}}),b.elements.$popbox_empty=a("<div/>",{class:"popbox-empty",css:{display:"block",position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}}).appendTo(b.elements.$popbox),b.elements.$popbox_popup=a("<div/>",{class:"popbox-popup",css:{display:"none",position:"absolute",top:"50%",left:"50%",bottom:"auto",right:"auto",width:"0px",height:"0px"}}).appendTo(b.elements.$popbox),b.elements.$popbox_loading=a("<div/>",{class:"popbox-loading",css:{display:"none"}}).appendTo(b.elements.$popbox_popup),b.elements.$popbox_wrapper=a("<div/>",{class:"popbox-wrapper"}).appendTo(b.elements.$popbox_popup),b.elements.$popbox_container=a("<div/>",{class:"popbox-container"}).appendTo(b.elements.$popbox_wrapper),b.elements.$popbox_title=a("<div/>",{class:"popbox-title"}).appendTo(b.elements.$popbox_container),b.elements.$popbox_content=a("<div/>",{class:"popbox-content"}).appendTo(b.elements.$popbox_container),b.elements.$popbox_close=a("<a/>",{class:"popbox-close",href:"javascript:void(0);"}).appendTo(b.elements.$popbox_container),b._private.applyDomSettings(),b.elements.$popbox_close.off("click.popbox_close").on("click.popbox_close",function(a){a.preventDefault(),b.close()});b.elements.$popbox.on("mousedown."+e._event_namespace+" touchstart."+e._event_namespace,function(c){var d=c.originalEvent.touches&&c.originalEvent.touches[0]?c.originalEvent.touches[0].pageX:c.pageX,e=c.originalEvent.touches&&c.originalEvent.touches[0]?c.originalEvent.touches[0].pageY:c.pageY;(c.originalEvent.touches||1==c.which)&&0===a(c.target).closest(".popbox-popup").length&&d<b.elements.$popbox_empty.width()&&(b.elements.$popbox.off(".Popbox_complex_close"),b.elements.$popbox.on("mouseup.Popbox_complex_close touchend.Popbox_complex_close",function(d){if((d.originalEvent.touches||1==d.which)&&(b.elements.$popbox.off(".Popbox_complex_close"),!b.properties.disable_background_click&&c.target===d.target&&0===a(d.target).closest(".popbox-popup").length))return d.preventDefault(),b.close(),!1}),b.elements.$popbox.on("mousemove.Popbox_complex_close touchmove.Popbox_complex_close",function(a){var c=a.originalEvent.touches&&a.originalEvent.touches[0]?a.originalEvent.touches[0].pageX:a.pageX,f=a.originalEvent.touches&&a.originalEvent.touches[0]?a.originalEvent.touches[0].pageY:a.pageY;(c<d-5||c>d+5||f<e-5||f>e+5)&&b.elements.$popbox.off(".Popbox_complex_close")}),b.elements.$popbox.on("scroll.Popbox_complex_close",function(){b.elements.$popbox.off(".Popbox_complex_close")}))}),b.elements.$popbox.appendTo(c),e._instances[b.properties.instance_id]=b,e._instances.length++,b._private.triggerHook("after_create")},f.prototype.destroy=function(){var a=this;a.elements.$popbox&&(a._private.triggerHook("destroy"),a.elements.$popbox.remove(),a.elements.$popbox=null,e.isSet(e._instances[a.properties.instance_id])&&(delete e._instances[a.properties.instance_id],e._instances.length--),a._private.closeOverlay(),a._private.reset(),a._private.triggerHook("after_destroy"))},f.prototype.update=function(b,c){var d=this;c=e.param(c,!0),a.extend(!0,d.settings,e.param(b,{})),d.isCreated()&&(d.isOpen()?c?d.showLoading(function(){d._private.applyDomSettings(),d.adjust(!0)}):(d._private.applyDomSettings(),d.adjust(!1)):d._private.applyDomSettings())},f.prototype.open=function(){var a=this;if(!a.isOpen()){if(a.elements.$popbox?a._private.applyDomSettings():a.create(),a._private.triggerHook("open"),a.trigger("open"),"absolute"==a.elements.$popbox.css("position"))a.elements.$popbox.css("top",e.$window.scrollTop()+"px");else if(a.settings.hide_page_scroll){var b=e.$body.width();!1===a.properties.last_html_overflow&&(a.properties.last_html_overflow=e.getInlineStyle(e.$html,"overflow")),e.$html.addClass("popbox-hide-page-scroll").css("overflow","hidden");var c=e.$body.width();a.settings.hide_page_scroll_space&&(!1===a.properties.last_html_margin_right&&(a.properties.last_html_margin_right=e.getInlineStyle(e.$html,"margin-right")),c>b&&e.$html.css("margin-right",c-b+"px"))}a._private.openOverlay(),a.elements.$popbox_popup.css({display:"block","box-sizing":"content-box"}),a.elements.$popbox.css({display:"block","box-sizing":"content-box"}),a.elements.$popbox_popup.css({visibility:"visible","box-sizing":"content-box"}),a.properties.is_loading||a.showContent(),a.adjust(!1),a.elements.$popbox_popup.css(a._private.getAnimationStartProperties("open")),e.clearTransition(a.elements.$popbox_popup),a.properties.is_changing_state=!0,e.transition(a.elements.$popbox_popup,a._private.getAnimationEndProperties("open"),a._private.getAnimationSpeed("open"),a._private.getAnimationEase("open"),function(){a.properties.is_changing_state=!1}),a.elements.$popbox_popup.hasClass("popbox-animating")&&(a.properties.disable_background_click=!0,a.properties.disable_background_click_timer=setTimeout(function(){a.properties.disable_background_click=!1,a.properties.disable_background_click_timer=!1},a._private.getAnimationSpeed("open")+200)),a.properties.is_open=!0,a._private.triggerHook("after_open"),a.trigger("after_open")}},f.prototype.close=function(a){var b=this;if(b.isOpen()){b._private.triggerHook("close"),b.trigger("close"),b.properties.is_open=!1;for(var c in b.elements)b.elements.hasOwnProperty(c)&&b.elements[c].length&&e.clearTransition(b.elements[c]);b.elements.$popbox_popup.css(b._private.getAnimationStartProperties("close")),b.properties.is_changing_state=!0,e.transition(b.elements.$popbox_popup,b._private.getAnimationEndProperties("close"),b._private.getAnimationSpeed("close"),b._private.getAnimationEase("close"),function(){b.properties.is_changing_state=!1,b.elements.$popbox.css({display:"none"}),!1!==b.properties.last_html_overflow&&e.$html.css("overflow",b.properties.last_html_overflow),!1!==b.properties.last_html_margin_right&&e.$html.css("margin-right",b.properties.last_html_margin_right),b.properties.last_html_overflow=!1,b.properties.last_html_margin_right=!1,e.$html.removeClass("popbox-hide-page-scroll"),a||!b.settings.cache?b.destroy():(b.elements.$popbox_popup.css(b._private.getAnimationEndProperties("open")),b.properties.disable_background_click=!1,!1!==b.properties.disable_background_click_timer&&(clearTimeout(b.properties.disable_background_click_timer),b.properties.disable_background_click_timer=!1)),b._private.triggerHook("after_close"),b.trigger("after_close")})}b._private.closeOverlay()},f.prototype.adjust=function(b){var c=this;if(b=e.param(b,!0),c.isCreated()){var d=function(b,d){b=e.param(b,!1),d=e.param(d,!1);var f,g,h,i,j=c.elements.$popbox_empty.width(),k=e.$window.height(),l=e.elementPaddingWidth(c.elements.$popbox_popup),m=e.elementPaddingHeight(c.elements.$popbox_popup),n=e.elementPaddingWidth(c.elements.$popbox_content,!0),o=e.elementPaddingHeight(c.elements.$popbox_content,!0),p=(c.settings.width_margin>0?j-j*(2*c.settings.width_margin):j)-l,q=(c.settings.height_margin>0?k-k*(2*c.settings.height_margin):k)-m,r=0,s=0,t=e.isNumber(c.settings.width)?c.settings.width+"px":"auto",u=e.isNumber(c.settings.height)?c.settings.height+"px":"auto",v=q;e.isNumber(c.settings.max_width,!0)&&p>c.settings.max_width&&(p=c.settings.max_width),e.isNumber(c.settings.max_height,!0)&&q>c.settings.max_height&&(q=c.settings.max_height),e.isNumber(c.settings.min_width,!0)&&r<c.settings.min_width&&(r=c.settings.min_width),e.isNumber(c.settings.min_height,!0)&&s<c.settings.min_height&&(s=c.settings.min_height),c.elements.$popbox_content.css({height:"","overflow-y":"","box-sizing":"content-box"}),c.elements.$popbox_wrapper.css({position:"relative",top:"0px",left:"0px",width:c.settings.aspect_fit?"99999px":p+"px",height:c.settings.aspect_fit?"99999px":"1px",overflow:"hidden","box-sizing":"content-box"}),c.elements.$popbox_container.css({position:"absolute",top:"0px",left:"0px",width:t,height:u,"min-width":r+"px","min-height":s+"px","max-width":"100%","box-sizing":"content-box"}),f=Math.ceil(100*e.getTrueWidth(c.elements.$popbox_container))/100,g=Math.ceil(100*e.getTrueHeight(c.elements.$popbox_container))/100;var w=function(b){b=b||!1;var d=g-o,f=c.settings.content_additional_offset;if(d-=c.elements.$popbox_content.offset().top-c.elements.$popbox_container.offset().top,e.isNumber(f)?d+=f:f=[f],f instanceof Array)for(var h=0;h<f.length;h++)if(e.isString(f[h],!0)){var i=0;a(f[h]).each(function(){var b=a(this),d=b.offset().top+b.outerHeight(!0)-(c.elements.$popbox_content.offset().top+c.elements.$popbox_content.outerHeight(!0));d>0&&d>i&&(i=d)})}c.elements.$popbox_content.css({height:b?Math.floor(d)+"px":d+"px","overflow-y":b?"scroll":"hidden"})};if(c.settings.aspect_fit){if(f>p||g>q){var x=(q-o)/(p-n),y=(g-o)/(f-n);y>x?(f=(q-o)/(g-o)*(f-n)+n,g=q):(g=(p-n)/(f-n)*(g-o)+o,f=p),w(!1)}}else(!0===c.settings.max_height||e.isNumber(c.settings.max_height,!0))&&g>q?(g=q,w(!0)):w(!1);var z=function(){c.elements.$popbox_wrapper.css({position:"",top:"",left:"",width:"",height:"",overflow:""}),c.elements.$popbox_container.css({position:"",top:"",left:"",width:"",height:"","min-width":"","min-height":"","max-width":""})};i=(j-(f+l))/2,h=(k-(g+m))/2,g>v&&(h=c.settings.height_margin>0?k*c.settings.height_margin:0),b?(e.clearTransition(c.elements.$popbox_popup,"adjust"),e.transition(c.elements.$popbox_empty,{height:Math.floor(g+m+2*h-1)+"px"},e._speeds.fast,e._eases.easeInOutQuad),e.transition(c.elements.$popbox_popup,{width:f+"px",height:g+"px",top:h+"px",left:i+"px"},e._speeds.fast,e._eases.easeInOutQuad,function(){z(),d&&c.showContent()},"adjust")):(z(),c.elements.$popbox_popup.css({width:f+"px",height:g+"px",top:h+"px",left:i+"px"}),c.elements.$popbox_empty.css({height:Math.floor(g+m+2*h-1)+"px"}))};c._private.checkImagesLoaded(),c.settings.wait_for_images&&c.properties.content_image_cache_pending>0?c.showLoading(function(){b||d(b,!1)}):b?c.showLoading(function(){d(b,!0)}):d(!1,!0)}},f.prototype.showLoading=function(a){var b=this;if(b.isCreated()){if(b.isLoading())return void(b.elements.$popbox_loading.hasClass("popbox-animating")||b.elements.$popbox_wrapper.hasClass("popbox-animating")||!e.isFunction(a)||a());b.isOpen()?(e.clearTransition(b.elements.$popbox_loading),e.clearTransition(b.elements.$popbox_wrapper),e.transition(b.elements.$popbox_wrapper,{opacity:"0"},e._speeds.fast,"linear",function(){b.elements.$popbox_wrapper.css({visibility:"hidden"}),b.elements.$popbox_loading.css({opacity:"0",display:"block"}),e.transition(b.elements.$popbox_loading,{opacity:"1"},e._speeds.fast,"linear",function(){e.isFunction(a)&&a()})})):(b.elements.$popbox_wrapper.css({opacity:"0",visibility:"hidden"}),b.elements.$popbox_loading.css({opacity:"1",display:"block"}),e.isFunction(a)&&a()),b.properties.is_loading=!0}},f.prototype.showContent=function(a){var b=this;if(b.isCreated()){if(!b.isLoading())return void(b.elements.$popbox_popup.hasClass("popbox-animating")||b.elements.$popbox_loading.hasClass("popbox-animating")||b.elements.$popbox_wrapper.hasClass("popbox-animating")||!e.isFunction(a)||a());b.isOpen()?(e.clearTransition(b.elements.$popbox_loading),e.clearTransition(b.elements.$popbox_wrapper),e.transition(b.elements.$popbox_loading,{opacity:"0"},e._speeds.fast,"linear",function(){b.elements.$popbox_loading.css({display:"none"}),b.elements.$popbox_wrapper.css({opacity:"0",visibility:"visible"}),e.transition(b.elements.$popbox_wrapper,{opacity:"1"},e._speeds.fast,"linear",function(){e.isFunction(a)&&a()})})):(b.elements.$popbox_loading.css({display:"none",opacity:"0"}),b.elements.$popbox_wrapper.css({opacity:"1",visibility:"visible"}),e.isFunction(a)&&a()),b.properties.is_loading=!1}},f.prototype.isLoading=function(){return this.properties.is_loading},f.prototype.isOpen=function(){return this.properties.is_open},f.prototype.isChangingState=function(){return this.properties.is_changing_state},f.prototype.isCreated=function(){return!!this.elements.$popbox},f.prototype.on=function(a,b){var c=this,d=a.split(".",2);if(d.length){var f=d[0],g=d[1]?d[1]:"_default";e.isPlainObject(c.properties.events[f])||(c.properties.events[f]={}),e.isArray(c.properties.events[f][g])||(c.properties.events[f][g]=[]),c.properties.events[f][g].push(b)}},f.prototype.off=function(a,b){var c=this,d=a.split(".",2);if(d.length){var f=d[0],g=!!d[1]&&d[1];if(e.isPlainObject(c.properties.events[f]))for(var h in c.properties.events[f])if(c.properties.events[f].hasOwnProperty(h)&&e.isArray(c.properties.events[f][h])&&(!1===g||g===h))if(e.isFunction(b))for(var i=0;i<c.properties.events[f][h].length;i++)c.properties.events[f][h][i]===b&&(c.properties.events[f][h].splice(i,1),i--);else c.properties.events[f][h]=[]}},f.prototype.trigger=function(a,b,c){var d=this;c=e.isArray(c)?c:[];var f=a.split(".",2);if(f.length){var g=f[0],h=!!f[1]&&f[1];if(e.isFunction(d.settings[g])&&d.settings[g](),e.isPlainObject(d.properties.events[g]))for(var i in d.properties.events[g])if(d.properties.events[g].hasOwnProperty(i)&&e.isArray(d.properties.events[g][i])&&(!1===h||h===i))for(var j=0;j<d.properties.events[g][i].length;j++)!e.isFunction(d.properties.events[g][i][j])||e.isFunction(b)&&d.properties.events[g][i][j]!==b||d.properties.events[g][i][j].apply(d,c)}},e.$window.on("resize."+e._event_namespace,function(){if(e._instances.length>0)for(var a in e._instances)e._instances.hasOwnProperty(a)&&e._instances[a]instanceof f&&e._instances[a].isOpen()&&e._instances[a].adjust(!1)}),a.Popbox=f}(jQuery,window);