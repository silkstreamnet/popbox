(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};(()=>{const t=jQuery;var o=e.n(t);!function(e){var t=e.prototype._static,r=function(){};t._gallery_event_namespace="PopboxGallery",o().extend(!0,e.prototype.default_settings,{gallery:{selector:"",clickable:!0,swipeable:!0,error:'<div class="popbox-gallery-error">There was an error loading the image.</div>',next:"<span>&#x25B6;</span>",prev:"<span>&#x25C0;</span>",items:[]}}),r.prototype.attachSwipeEvents=function(){var e=this.self,r=this.self.popbox;if(r.elements.$popbox&&r.settings.gallery.swipeable){var s=t._gallery_event_namespace+"Swipe",p=!1,a=!1,n=!1,i=0,l=0,g=0,f=0,m=[],c=function(e,t,o){return n=!1,!!(a=r.elements.$popbox_popup.find(".popbox-gallery-image")).length&&(a.data("movement")||a.data("movement",0),g=i=e,f=l=t,d(e,t,o),!0)},d=function(e,s,p){m.push({distance:e-g,time:(new Date).getTime()}),m.length>10&&m.shift(),g=e,f=s;var c=Math.abs(g-i)-8,d=Math.abs(f-l)-8;if(!n){if(!(c>0&&c>d))return void((c>0||d>0)&&d>c&&u(p));n=!0,o()("<div/>").css({position:"absolute",top:"0",left:"0",right:"0",bottom:"0","z-index":r.settings.z_index+50}).addClass("popbox-swipe-shield").appendTo(r.elements.$popbox_popup),u(p)}t._support.transform3d?a.css("transform","translate3d("+(g-i+a.data("movement"))+"px,0px,0px"):a.css("transform","translate("+(g-i+a.data("movement"))+"px,0px")},u=function(o){p=!1,t.$document.off("touchmove."+s),t.$document.off("touchend."+s),t.$document.off("mousemove."+s),t.$document.off("mouseup."+s);var l=g-i+a.data("movement");if(a.data("movement",l),n&&(o.stopImmediatePropagation(),o.preventDefault(),g>i?e.prev():g<i&&e.next()),r.elements.$popbox_popup.find(".popbox-swipe-shield").remove(),n&&m.length){for(var f=0,c=0,d=m[m.length-1].time,u=0,y=m.length-1;y>=0;y--){if(u){if(1===u&&m[y].distance<=0||-1===u&&m[y].distance>=0){c=m[y].time;break}}else m[y].distance>0?u=1:m[y].distance<0&&(u=-1);f+=m[y].distance,c=m[y].time}if(c>0&&c!==d){var h=f/(d-c);a.css("transition","ease-in 300ms transform"),t._support.transform3d?a.css("transform","translate3d("+(l+300*h)+"px,0px,0px"):a.css("transform","translate("+(l+300*h)+"px,0px")}}else a.css("transform","translate3d(0px,0px,0px");return!n};r.elements.$popbox.off("dragstart."+s).on("dragstart."+s,".popbox-popup",(function(e){e.preventDefault()})),r.elements.$popbox.off("touchstart."+s).on("touchstart."+s,".popbox-popup",(function(e){p=!0,c(e.originalEvent.touches[0].pageX,e.originalEvent.touches[0].pageY,e)?(t.$document.off("touchmove."+s).on("touchmove."+s,(function(e){d(e.originalEvent.touches[0].pageX,e.originalEvent.touches[0].pageY,e)})),t.$document.off("touchend."+s).on("touchend."+s,(function(e){return u(e)}))):p=!1})),r.elements.$popbox.off("mousedown."+s).on("mousedown."+s,".popbox-popup",(function(e){p||1!==e.which||c(e.pageX,e.pageY,e)&&(t.$document.off("mousemove."+s).on("mousemove."+s,(function(e){d(e.pageX,e.pageY,e)})),t.$document.off("mouseup."+s).on("mouseup."+s,(function(e){if(1===e.which)return u(e)})))})),r.elements.$popbox.off("click."+s).on("click."+s,".popbox-popup",(function(e){if(n)return e.stopImmediatePropagation(),e.preventDefault(),!1}))}},r.prototype.detachSwipeEvents=function(){this.self;var e=this.self.popbox;if(e.elements.$popbox){var o=t._gallery_event_namespace+"Swipe";e.elements.$popbox.off("dragstart."+o),e.elements.$popbox.off("touchstart."+o),e.elements.$popbox.off("mousedown."+o),e.elements.$popbox.off("click."+o)}},r.prototype.attachNavEvents=function(){var e=this.self,o=this.self.popbox;if(o.elements.$popbox){var r=t._gallery_event_namespace+"Nav";o.elements.$popbox.off("click."+r),o.elements.$popbox.on("click."+r,".popbox-gallery-next",(function(t){t.preventDefault(),e.next()})),o.elements.$popbox.on("click."+r,".popbox-gallery-prev",(function(t){t.preventDefault(),e.prev()}))}};var s=function(e){var t=this;t.popbox=e,t._private=new r,t._private.self=t};s.prototype.refreshItems=function(){var e=this,r=this.popbox;if(t.isArray(r.settings.gallery.items)&&r.settings.gallery.items.length>0)for(var s=0;s<r.settings.gallery.items.length;s++)r.properties.gallery.items.push(r.settings.gallery.items[s]);if(r.settings.gallery.selector){var p=o()(r.settings.gallery.selector);p.each((function(){var e=o()(this),s=e.data("url"),p=e.attr("href"),a=e.attr("src"),n=!1;s?n=s:p?n=p:a?n=a:(e.find("a[href]").each((function(){var e=o()(this).attr("href");e&&!e.match(/^#/)&&t.indexOf(e,r.properties.gallery.items,!0)<0&&r.properties.gallery.items.push(e)})),e.find("img[src]").each((function(){var e=o()(this).attr("src");e&&t.indexOf(e,r.properties.gallery.items,!0)<0&&r.properties.gallery.items.push(e)}))),n&&t.indexOf(n,r.properties.gallery.items,!0)<0&&r.properties.gallery.items.push(n)})),r.settings.gallery.clickable&&p.off("click.popbox_gallery_open").on("click.popbox_gallery_open",(function(s){s.preventDefault();var p=o()(this),a=p.data("url"),n=p.attr("href"),i=p.attr("src");if(e.refreshItems(),a)e.goTo(t.indexOf(a,r.properties.gallery.items,!0));else if(n)e.goTo(t.indexOf(n,r.properties.gallery.items,!0));else if(i)e.goTo(t.indexOf(i,r.properties.gallery.items,!0));else{var l=p.find("a[href]:first").attr("href"),g=p.find("img[src]:first").attr("src");l&&!l.match(/^#/)?e.goTo(t.indexOf(l,r.properties.gallery.items,!0)):g&&e.goTo(t.indexOf(g,r.properties.gallery.items,!0))}r.open()}))}},s.prototype.addItem=function(e){this.addItems([e])},s.prototype.removeItem=function(e){this.removeItems([e])},s.prototype.addItems=function(e){var o=this.popbox;if(e){t.isArray(o.base_settings.gallery.items)||(o.base_settings.gallery.items=[]),t.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)o.base_settings.gallery.items.push(e[r]);o._private.applySettings()}},s.prototype.removeItems=function(e){var o=this.popbox;if(e&&t.isArray(o.base_settings.gallery.items)){t.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var s=t.indexOf(e[r],o.base_settings.gallery.items);s>=0&&o.base_settings.gallery.items.splice(s,1)}o._private.applySettings()}},s.prototype.goTo=function(e){var o=this.popbox;o.properties.gallery.items.length>0&&(o.trigger("gallery_change"),(e=t.isNumber(e)?e:o.properties.gallery.current_index)>o.properties.gallery.items.length-1?e=0:e<0&&(e=o.properties.gallery.items.length>0?o.properties.gallery.items.length-1:0),o.properties.gallery.current_index=e,o.update({content:'<div class="popbox-gallery-container" style="overflow:hidden;"><div class="popbox-gallery-image"><img src="'+o.properties.gallery.items[o.properties.gallery.current_index]+'" /></div></div>'},!0),o.on("adjust.gallery_after_change",(function(){o.off("adjust.gallery_after_change"),o.trigger("gallery_after_change")})))},s.prototype.next=function(){var e=this.popbox;this.goTo(e.properties.gallery.current_index+1)},s.prototype.prev=function(){var e=this.popbox;this.goTo(e.properties.gallery.current_index-1)},e.prototype.gallery=s,e.prototype.addHook("initialize",(function(){this.gallery=new s(this)})),e.prototype.addHook("after_initialize",(function(e){var o=this.gallery,r=this;"gallery"===r.settings.mode&&(e&&!t.isSet(e.fit)&&(r.base_settings.fit=!0,r._private.applySettings()),o.refreshItems())})),e.prototype.addHook("after_reset",(function(){this.properties.gallery={items:[],current_index:0}})),e.prototype.addHook("after_create",(function(){var e=this.gallery;"gallery"===this.settings.mode&&(e._private.attachSwipeEvents(),e._private.attachNavEvents())})),e.prototype.addHook("open",(function(){var e=this.gallery,r=this;if("gallery"===r.settings.mode){e.refreshItems();var s=o()("<div/>").html(r.settings.content).find("img[src]"),p=0;s.length&&(p=t.indexOf(s.attr("src"),r.properties.gallery.items,!0)),e.goTo(p)}})),e.prototype.addHook("image_error",(function(e){var t=this;"gallery"===t.settings.mode&&(t.update({content:t.settings.gallery.error},!1),t.properties.cache.images[e]&&delete t.properties.cache.images[e])})),e.prototype.addHook("after_update",(function(){var e=this.gallery,t=this;t.isOpen()||(t.properties.gallery.items=[],t.properties.gallery.current_index=0),"gallery"===t.settings.mode&&(e.refreshItems(),e.goTo())})),e.prototype.addHook("after_update_dom",(function(){var e=this,t=!1;"gallery"===e.settings.mode&&(e.elements.$popbox.addClass("popbox-gallery"),e.properties.gallery.items.length>1&&(e.elements.$popbox_gallery_next||(e.elements.$popbox_gallery_next=o()("<a/>",{class:"popbox-gallery-next",href:"javascript:void(0);"}).html(e.settings.gallery.next).appendTo(e.elements.$popbox_container)),e.elements.$popbox_gallery_prev||(e.elements.$popbox_gallery_prev=o()("<a/>",{class:"popbox-gallery-prev",href:"javascript:void(0);"}).html(e.settings.gallery.prev).appendTo(e.elements.$popbox_container)),t=!0)),t||(e.elements.$popbox_gallery_next&&e.elements.$popbox_gallery_next.remove(),e.elements.$popbox_gallery_prev&&e.elements.$popbox_gallery_prev.remove(),e.elements.$popbox_gallery_next=!1,e.elements.$popbox_gallery_prev=!1)})),e.prototype.plugins.gallery="3.1.3"}(o().Popbox)})()})();