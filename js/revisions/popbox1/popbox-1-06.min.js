(function(b){function j(g,a){var d={forceAbsolute:!1,container:window,completeHandler:null,animate:!0};b.extend(d,a);return g.each(function(){var a=b(g),c=b(d.container),e=d.container==window;d.forceAbsolute&&(e?a.remove().appendTo("body"):a.remove().appendTo(c.get(0)));a.css("position","absolute");var f=e?2:1.8,n=(e?c.width():c.outerWidth())/2-a.outerWidth()/2,e=(e?c.height():c.outerHeight())/f-a.outerHeight()/2;!0===d.animate?a.stop(!0,!0).animate({left:n+c.scrollLeft(),top:e+c.scrollTop()},500):a.stop(!0,!0).css({left:n+c.scrollLeft(),top:e+c.scrollTop()});d.completeHandler&&d.completeHandler(g)})}b.fn.PopBox=function(g){var a=b.extend({},{transition:!1,width:0,height:0,html:!1,contentid:!1,closeText:"X",onShow:!1,onClose:!1,onStart:!1,onClick:!1},g);a.popbox=!1;var d="",k="",c="",e="X",f="";b(this).click(function(g){if("function"===typeof a.onClick)a.onClick(a);d="number"===typeof a.width&&0<a.width?"width:"+a.width+"px;":"";k="number"===typeof a.height&&0<a.height?"height:"+a.height+"px;":"";c=""!=d||""!=k?d+" "+k:"";e="string"===typeof a.closeText?a.closeText:e;var r='<div class="popbox-cast" style="display:none;height:100%; width: 100%; position:fixed; left: 0; top:0; background-color: rgba(0,0,0,0.4); z-index: 9990;"></div><div class="popbox-popup" style="position:absolute; z-index:9991; visibility:hidden;'+c+'"><a class="popbox-close">'+e+"</a>";f=null!=a.html&&!1!=a.html&&""!=a.html&&"string"===typeof a.html?a.html:f;var i=!1;!1!=a.contentid&&("string"===typeof a.contentid&&""===f)&&(i=b("#"+a.contentid),f=0<i.length?b("<div />").append(b(i).eq(0).clone()).html():f,i.remove());b("body").append(r+f+"</div>");var h=b(".popbox-popup"),p=b(".popbox-cast");a.popbox=h;if("function"===typeof a.onStart)a.onStart(a);p.fadeIn(300);!1!=a.contentid&&h.find("#"+a.contentid);j(h,{animate:!1});h.css({visibility:"",display:"none"}).fadeIn(300);var l=!1;b(window).resize(function(){!1==l&&(l=!0,setTimeout(function(){j(h);l=!1},500))});var m=!1;b(window).scroll(function(){!1==m&&(m=!0,setTimeout(function(){j(h);m=!1},500))});var q=!1;b(".popbox-cast,.popbox-close").click(function(c){if(!q){if("function"===typeof a.onClose)a.onClose(a);a.popbox=!1;h.fadeOut(500,function(){b(this).remove()});p.fadeOut(500,function(){b(this).remove()});q=!0}c.preventDefault()});if("function"===typeof a.onShow)a.onShow(a);g.preventDefault()})}})(jQuery);
