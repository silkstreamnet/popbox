!function(t){function e(t,e){return"undefined"!=typeof t?t:e}function i(t,i){return i=e(i,!1),!isNaN(t-0)&&null!=t&&""!=t&&(!i||t>0)}function o(t,i){return i=e(i,!1),"string"==typeof t&&null!=t&&(!i||""!=t)}function s(t,e){if(t.properties.animating)switch(t.properties.animating=!1,e){case"close":t.container.remove(),t.properties.isopen=!1,t.container=!1,t.popup=!1,t.shadow=!1;break;case"open":t.properties.isopen=!0}}function n(e,o){var s={forceAbsolute:!1,container:window,completeHandler:null,animate:!0,width:"auto",height:"auto",maxwidth:"none",maxheight:"none",push_obj:!1,shadow:!1,autoScale:!1,innerOverflow:!1};t.extend(s,o),e.each(function(o){var n=t(this),p=t(s.container),a=s.container==window,r=t("body");s.forceAbsolute&&(a?n.remove().appendTo(r):n.remove().appendTo(p.get(0)));var h={position:n.css("position"),visibility:n.css("visibility"),display:n.css("display")},c={visibility:p.css("visibility"),display:p.css("display")},l={position:"absolute",visibility:"hidden",display:"block"},d={visibility:"hidden",display:"block"};n.css(l),a||p.css(d);var u,g,f,w,x,m,v,b=0,y=0,_=0,k=0,O=!1;if(s.autoScale){var S="rsc-clone-"+(Math.floor(9e3*Math.random())+1e3),j=n.clone().addClass(S).css({height:"auto",width:"auto",top:"auto",left:"auto",position:"absolute",display:"block",visibility:"hidden"});j.find("img").css({"max-width":"none",height:"auto",display:"block"}),j.find("iframe").css({"max-height":"none","max-width":"none"}).attr("src",""),j.appendTo(r);var C=r.find("."+S).wrap('<div style="height:0;width:0;position:absolute;left:0;top:0;"></div>');if(f=C.width(),w=C.height(),x=C.outerWidth(!1)-f,m=C.outerHeight(!1)-w,C.parent().remove(),u=.8*(a?p.width():p.outerWidth(!1))-x,g=.8*(a?p.height():p.outerHeight(!1))-m,w>g||f>u){var H=g/u,z=w/f,I=1;z>H?(I=g/w,y=g,b=f*I):(I=u/f,b=u,y=w*I)}else b=f,y=w;n.find("img").css({"max-width":"100%",height:"auto",display:"block"}),n.find("iframe").css({"max-height":"100%","max-width":"100%"})}else{if(u=.8*(a?p.width():p.outerWidth(!1)),g=.8*(a?p.height():p.outerHeight(!1)),x=n.outerWidth(!1)-n.width(),m=n.outerHeight(!1)-n.height(),b=u-x,y=g-m,i(s.width)?b=s.width:i(s.maxwidth)&&b>s.maxwidth&&(b=s.maxwidth),i(s.height))y=s.height;else if(s.innerOverflow||i(s.maxheight)){i(s.maxheight)&&y>s.maxheight&&(y=s.maxheight);var T=n.find(".popbox-content");if(1==T.length){T.css({"overflow-y":"",height:"",position:"relative"}),0==parseInt(T.css("margin-top"))&&T.css({"margin-top":"-1px",top:"1px"});var W=T.outerHeight(!0),D=W-T.height(),P=parseInt(n.css("padding-top"))+parseInt(n.css("border-top-width"))+parseInt(n.css("margin-top")),A=y-(T.position().top-P);W>A&&(T.css("overflow-y","scroll"),T.height(A-D))}}v=.05*(a?p.height():p.outerHeight(!1));var M=a?p.height():p.outerHeight(!1);g=.9*M,k=y+m,k>g?(O=v,p.css("overflow","auto"),s.push_obj.css({top:v+k+"px",height:v+"px",width:"1px"}),s.shadow.css({height:2*v+k+"px"})):(p.css("overflow",""),s.push_obj.css({top:"0px",height:"0px",width:"0px"}),s.shadow.css({height:"100%"}))}_=b+x,k=y+m;var N=((a?p.width():p.outerWidth(!1))-_)/2,B=((a?p.height():p.outerHeight(!1))-k)/2;O!==!1&&(B=O),a&&(N+=p.scrollLeft(),B+=p.scrollTop()),n.css(h),a||p.css(c),s.animate===!0?n.stop(!0,!1).animate({left:N,top:B,width:b,height:y},500).css("overflow",""):n.stop(!0,!1).css({left:N,top:B,width:b,height:y}),s.completeHandler&&s.completeHandler(e)})}function p(t,i){t=e(t,!1),i=e(i,!1);var o=!0;if(t&&t.popup){var s=t.popup.find("img");s.length>0&&s.each(function(t,e){e.complete||(o=!1)})}return i&&o&&h(t),o}function a(i){if(i=e(i,!1),i&&i.popup){var o=i.popup.find("img");if(o.length>0){var s=0;o.each(function(e,o){o.complete?s++:t(o).load(function(){p(i,!0)})}),o.length==s&&p(i,!0)}}}function r(t){t.properties.loaded_content!==t.settings.content&&(p(t)||a(t),t.properties.loaded_content=t.settings.content)}function h(t,i){i=e(i,!1),t=e(t,!1),t&&n(t.popup,{animate:i,container:t.container,width:t.settings.width,height:t.settings.height,maxwidth:t.settings.maxwidth,maxheight:t.settings.maxheight,push_obj:t.bottom_push,shadow:t.shadow,autoScale:t.settings.autoScale,innerOverflow:t.settings.innerOverflow})}var c=function(i){i=e(i,{}),this.settings=t.extend({},this.defaultSettings,i),this.container=!1,this.shadow=!1,this.properties={animating:!1,isopen:!1,resizepause:!1,loaded_content:-1}};c.prototype.adjust=function(t){t=e(t,!1);var i=this;i.properties.resizepause||t&&!i.properties.isopen||(i.properties.resizepause=!0,setTimeout(function(){h(i,t),i.properties.resizepause=!1},i.properties.updatePositionDelay),r(i))},c.prototype.checkImages=function(){this.properties.loaded_content=-1},c.prototype.close=function(){var e=this;!e.properties.animating&&e.properties.isopen&&("function"==typeof e.settings.onClose&&e.settings.onClose(e),e.properties.animating=!0,e.container.fadeOut(e.settings.fadeOutSpeed,function(){s(e,"close"),t("body").css({overflow:"","margin-right":""})}),t(window).off("resize.popbox.adjust"),e.properties.isopen=!1,e.checkImages(),"function"==typeof e.settings.afterClose&&e.settings.afterClose(e))},c.prototype.open=function(){var e=this;if(!e.properties.animating&&!e.properties.isopen){"function"==typeof e.settings.onOpen&&e.settings.onOpen(e),e.properties.animating=!0;var i=o(this.settings.close,!0)?e.settings.close:this.defaultSettings.close,n=o(this.settings.content,!0)?e.settings.content:"",p=o(this.settings.title,!0)?'<div class="popbox-title">'+e.settings.title+"</div>":"",a=o(this.settings.customClass,!0)?" "+e.settings.customClass:"",r=t("body"),h=r.width();r.css("overflow","hidden");var c=r.width();if(c>h){var l=parseInt(r.css("margin-right")),d=l+(c-h);r.css("margin-right",d+"px")}r.append('<div class="popbox-container'+a+'" style="display: none;"><div class="popbox-bottom-push"></div><a class="popbox-shadow" href="javascript:void(0);"></a><div class="popbox-popup">'+p+'<a class="popbox-close">'+i+'</a><div class="popbox-content">'+n+"</div></div></div>"),e.container=t(".popbox-container"),e.popup=e.container.find(".popbox-popup"),e.shadow=e.container.find(".popbox-shadow"),e.bottom_push=e.container.find(".popbox-bottom-push"),e.close_button=e.container.find(".popbox-close"),e.title_area=e.container.find(".popbox-title"),e.content_area=e.container.find(".popbox-content"),e.container.css({display:"none",height:"100%",width:"100%",position:"fixed",left:"0px",top:"0px","z-index":"990","background-color":"rgba(0,0,0,0.4)"}),e.bottom_push.css({display:"block",position:"absolute",left:"0px",top:"0px",height:"0px",width:"1px","z-index":"992"}),e.popup.css({display:"block",visibility:"visible",position:"absolute",top:"0px",left:"0px","z-index":"993"}),e.shadow.css({display:"block",position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%","z-index":"991",background:"#fff",opacity:"0",filter:"alpha(opacity=0)",cursor:"default"}),e.adjust(),e.container.fadeIn(e.settings.fadeInSpeed,function(){s(e,"open")}),e.shadow.click(function(t){e.close(),t.preventDefault()}),e.close_button.click(function(t){e.close(),t.preventDefault()}),t(window).on("resize.popbox.adjust",function(){e.adjust(!0)}),e.properties.isopen=!0,"function"==typeof e.settings.afterOpen&&e.settings.afterOpen(e)}},c.prototype.update=function(i,s){var n=this;if(i=e(i,{}),s=e(s,!0),n.settings=t.extend({},n.settings,i),n.properties.isopen){var p=o(n.settings.close,!0)?n.settings.close:n.defaultSettings.close,a=o(n.settings.content,!0)?n.settings.content:"",r=o(n.settings.title,!0)?n.settings.title:"";n.close_button.length>0&&n.close_button.html(p),n.content_area.length>0&&n.content_area.html(a),n.title_area.length>0?""!=r?n.title_area.html(r):(n.title_area.remove(),n.title_area=n.popup.find(".popbox-title")):""!=r&&(n.popup.prepend('<div class="popbox-title">'+r+"</div>"),n.title_area=n.popup.find(".popbox-title")),s&&n.adjust(!0)}},c.prototype.isOpen=function(){return 1==this.properties.isopen},c.prototype.isClose=function(){return 0==this.properties.isopen},c.prototype.defaultSettings={width:"auto",height:"auto",maxwidth:"none",maxheight:"none",innerOverflow:!1,content:"",close:"X",title:"",onOpen:!1,onClose:!1,afterOpen:!1,afterClose:!1,fadeInSpeed:400,fadeOutSpeed:400,updatePositionDelay:200,autoScale:!1,customClass:""},window.PopBox=c}(jQuery);