!function(e){function t(e,t){return"undefined"!=typeof e?e:t}function o(e,o){return o=t(o,!1),!isNaN(e-0)&&null!=e&&""!=e&&(!o||e>0)}function n(e,o){return o=t(o,!1),"string"==typeof e&&null!=e&&(!o||""!=e)}function i(e,t){var o=e.attr(t);return("undefined"==typeof o||o===!1||""===o)&&(o=""),o}function p(e,t){var o=i(e,"style");if(t&&o){var n=new RegExp("(^|;)\\s*"+RegExp.escape(t)+"\\s*:");if(o.match(n))return e.css(t)}return""}function s(t,o){if(t.properties.animating)switch(t.properties.animating=!1,o){case"close":t.container.remove(),t.container=!1,t.properties.isopen=!1,t.popup=!1,t.shadow=!1,e("html").css({overflow:t.properties.bodyOverflow,"margin-right":t.properties.bodyMarginRight}),e(document).off("scroll.popbox touchmove.popbox mousewheel.popbox");break;case"open":t.properties.isopen=!0}}function a(e){e=t(e,!1);var o=!0;if(e&&e.popup){var n=e.popup.find("img");n.length>0&&n.each(function(e,t){t.complete||4===t.readyState||"complete"===t.readyState||(o=!1)})}return"gallery"==e.settings.mode&&(o?(e.content_area.show(),e.gallery_loading_area&&e.gallery_loading_area.hide(),e.properties.gallery.isloading=!1):(e.content_area.hide(),e.gallery_loading_area&&e.gallery_loading_area.show(),e.properties.gallery.isloading=!0)),o&&(h(e),e.properties.newopen=!1),o}function r(o){if(o=t(o,!1),o&&o.popup){var i=o.popup.find("img");if(i.length>0){var p=0;i.each(function(t,i){i.complete||4===i.readyState||"complete"===i.readyState?p++:("undefined"!=typeof i.onload?i.onload=function(){"undefined"!=typeof i.readyState?setTimeout(function(){a(o)},10):a(o)}:"undefined"!=typeof i.onreadystatechange&&(i.onreadystatechange=function(){setTimeout(function(){a(o)},10)}),"gallery"==o.settings.mode&&o.gallery_loading_area&&"undefined"!=typeof i.onerror&&(i.onerror=function(){var t=n(o.settings.gallery.error,!0)?o.settings.gallery.error:o.defaultSettings.gallery.error;o.gallery_loading_area.html(t),o.properties.gallery.isloading=!0,e(i).remove(),o.adjust()}))}),i.length==p&&a(o)}}}function l(e){e.properties.loaded_content!==e.settings.content&&(a(e)||r(e),e.properties.loaded_content=e.settings.content)}function d(e){e.popup.find("img").css({"max-width":"100%",height:"auto",display:"block"}),e.popup.find("iframe").css({"max-height":"100%","max-width":"100%"})}function c(t){var o=e("body"),n="popbox-rsc-clone",i=t.container.clone().stop(!0,!0).addClass(n).css({display:"block",visibility:"hidden","z-index":"-1",overflow:"hidden"});i.find("iframe").attr("src",""),i.appendTo(o);var p=o.find("."+n);return{container:p,popup:p.find(".popbox-popup").eq(0),content:p.find(".popbox-content").eq(0),gallery_loading_area:p.find(".popbox-gallery-loading").eq(0)}}function g(e){e&&e.container&&e.container.remove()}function h(e){if(e=t(e,!1),e&&e.popup){var n=e.settings,i=e.popup,p=e.container,s=e.content_area,a=e.gallery_loading_area;i.stop(!0,!1);var r=0,l=0,h=0,u=0,f=0,y=0,m=0,x=0,w=p.outerWidth(!1),b=p.outerHeight(!1),v=0,_=0,S=0,k=!1,O=!1;if(d(e),n.autoScale&&!e.properties.gallery.isloading)if(s.css({height:"100%",width:"100%",overflow:"hidden"}),O=c(e),O.popup.css({height:"auto",width:"auto",top:"auto",left:"auto"}),O.content.attr("style",""),O.content.find("img").css({"max-width":"none",height:"auto",display:"block"}),O.content.find("iframe").css({"max-height":"none","max-width":"none"}),f=O.popup.width(),y=O.popup.height(),m=O.popup.outerWidth(!1)-f,x=O.popup.outerHeight(!1)-y,g(O),v=.8*w-m,_=.8*b-x,v>n.maxwidth&&(v=n.maxwidth),_>n.maxheight&&(_=n.maxheight),y>_||f>v){var z=_/v,C=y/f,j=1;C>z?(j=_/y,l=_,r=f*j):(j=v/f,r=v,l=y*j)}else r=f,l=y;else{v=.8*w,_=.8*b,m=i.outerWidth(!1)-i.width(),x=i.outerHeight(!1)-i.height(),r=v-m,l=_-x,O=c(e),O.popup.css({height:"auto",width:"auto",top:"0",left:"0"}),O.content.attr("style",""),O.gallery_loading_area.attr("style","");var I=s,N=O.content;e.properties.gallery.isloading?(O.content.css("display","none"),O.gallery_loading_area.css("display","block"),I=a,N=O.gallery_loading_area):(O.content.css("display","block"),O.gallery_loading_area.css("display","none")),o(n.width)?r=n.width:n.scaleToContent&&O.popup.width()<r&&(r=O.popup.width()),o(n.maxwidth)&&r>n.maxwidth&&(r=n.maxwidth),O.popup.css({width:r}),o(n.height)?l=n.height:n.innerOverflow||(l=O.popup.height()),o(n.maxheight)&&l>n.maxheight&&(l=n.maxheight),0==parseInt(N.css("margin-top"))&&N.css({"margin-top":"-1px",top:"1px"});var R=N.outerHeight(!0),T=R-N.height(),E=parseInt(O.popup.css("padding-top")),D=parseInt(O.popup.css("border-top-width")),H=parseInt(O.popup.css("margin-top"));isNaN(E)&&(E=0),isNaN(D)&&(D=0),isNaN(H)&&(H=0);var q=E+D+H,M=l-(N.position().top-q);!e.properties.newopen&&n.animateSpeed>0?I.stop(!0,!1).height(I.height()).animate({height:M-T},n.animateSpeed):I.stop(!0,!1).css({height:M-T}),R>M&&n.innerOverflow&&I.css("overflow-y","scroll"),g(O),S=.05*b,_=.9*b,u=l+x,u>_?(k=S,p.css("overflow","auto"),e.bottom_push.css({top:S+u+"px",height:S+"px",width:"1px"}),e.shadow.css({height:2*S+u+"px"})):(p.css("overflow",""),e.bottom_push.css({top:"0px",height:"0px",width:"0px"}),e.shadow.css({height:"100%"}))}h=r+m,u=l+x;var P=(w-h)/2,W=(b-u)/2;k!==!1&&(W=k),!e.properties.newopen&&n.animateSpeed>0?i.animate({left:P,top:W,width:r,height:l},n.animateSpeed).css("overflow",""):i.css({left:P,top:W,width:r,height:l})}}null!=RegExp&&null==RegExp.escape&&(RegExp.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")});var u=function(o){o=t(o,{}),"gallery"==o.mode&&null==o.autoScale&&(o.autoScale=!0),this.settings=e.extend({},this.defaultSettings,o),this.container=!1,this.popup=!1,this.shadow=!1,this.properties={animating:!1,isopen:!1,newopen:!0,newopentime:0,resizepause:!1,loaded_content:-1,bodyMarginRight:"",bodyOverflow:"",gallery:{isloading:!1}}};u.prototype.adjust=function(){var e=this;!e.properties.resizepause&&e.properties.isopen&&(e.properties.resizepause=!0,setTimeout(function(){h(e),e.properties.resizepause=!1},e.properties.updatePositionDelay),l(e))},u.prototype.checkImages=function(){this.properties.loaded_content=-1},u.prototype.close=function(){var t=this;!t.properties.animating&&t.properties.isopen&&("function"==typeof t.settings.onClose&&t.settings.onClose(t),t.properties.animating=!0,t.container.fadeOut(t.settings.fadeOutSpeed,function(){s(t,"close")}),e(window).off("resize.popbox.adjust,scroll.popbox.adjust"),t.properties.isopen=!1,t.checkImages(),"function"==typeof t.settings.afterClose&&t.settings.afterClose(t))},u.prototype.open=function(){var t=this;if(!t.properties.animating&&!t.properties.isopen){"function"==typeof t.settings.onOpen&&t.settings.onOpen(t),t.properties.animating=!0;var o=n(this.settings.close,!0)?t.settings.close:t.defaultSettings.close,i=n(this.settings.content,!0)?t.settings.content:"",a=n(this.settings.title,!0)?'<div class="popbox-title">'+t.settings.title+"</div>":"",r=n(this.settings.customClass,!0)?" "+t.settings.customClass:"",l=e("html"),d=e("body");t.properties.bodyOverflow=p(l,"overflow");var c=l.width();l.css("overflow","hidden");var g=l.width();if(g>c){var h=l.css("margin-right");t.properties.bodyMarginRight=p(l,"margin-right");var u=parseInt(h),f=u+(g-c);l.css("margin-right",f+"px")}if(e(document).on("scroll.popbox touchmove.popbox mousewheel.popbox",function(e){}),d.append('<div class="popbox-container'+r+'" style="display: none;"><div class="popbox-bottom-push"></div><a class="popbox-shadow" href="javascript:void(0);"></a><div class="popbox-popup">'+a+'<a class="popbox-close">'+o+'</a><div class="popbox-content">'+i+"</div></div></div>"),t.container=e(".popbox-container"),t.popup=t.container.find(".popbox-popup"),t.shadow=t.container.find(".popbox-shadow"),t.bottom_push=t.container.find(".popbox-bottom-push"),t.close_button=t.container.find(".popbox-close"),t.title_area=t.container.find(".popbox-title"),t.content_area=t.container.find(".popbox-content"),t.gallery_loading_area=!1,t.container.css({display:"none",height:"100%",width:"100%",position:"fixed",left:"0px",top:"0px","z-index":"990","background-color":"rgba(0,0,0,0.4)"}),t.bottom_push.css({display:"block",position:"absolute",left:"0px",top:"0px",height:"0px",width:"1px","z-index":"992"}),t.popup.css({display:"block",position:"absolute",top:"0px",left:"0px","z-index":"993","-webkit-box-sizing":"content-box","-moz-box-sizing":"content-box","box-sizing":"content-box"}),t.shadow.css({display:"block",position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%","z-index":"991",background:"#fff",opacity:"0",cursor:"default"}),t.content_area.css({overflow:"hidden",height:"auto"}),"gallery"==t.settings.mode){t.content_area.hide();var y=n(this.settings.gallery.loading,!0)?t.settings.gallery.loading:t.defaultSettings.gallery.loading;t.content_area.after('<div class="popbox-gallery-loading">'+y+"</div>"),t.gallery_loading_area=t.container.find(".popbox-gallery-loading"),t.gallery_loading_area.css({overflow:"hidden",height:"auto"})}t.container.fadeIn(t.settings.fadeInSpeed,function(){s(t,"open")}),t.shadow.click(function(e){t.close(),e.preventDefault()}),t.close_button.click(function(e){t.close(),e.preventDefault()}),e(window).on("resize.popbox.adjust,scroll.popbox.adjust",function(){t.adjust()}),t.properties.isopen=!0,t.properties.newopen=!0,t.properties.newopentime=(new Date).getTime(),t.adjust(),"function"==typeof t.settings.afterOpen&&t.settings.afterOpen(t)}},u.prototype.update=function(o,i){var p=this;if(o=t(o,{}),i=t(i,!0),p.settings=e.extend({},p.settings,o),p.properties.isopen){var s=n(p.settings.close,!0)?p.settings.close:p.defaultSettings.close,a=n(p.settings.content,!0)?p.settings.content:"",r=n(p.settings.title,!0)?p.settings.title:"";p.close_button.length>0&&p.close_button.html(s),p.content_area.length>0&&p.content_area.html(a),p.title_area.length>0?""!=r?p.title_area.html(r):(p.title_area.remove(),p.title_area=p.popup.find(".popbox-title")):""!=r&&(p.popup.prepend('<div class="popbox-title">'+r+"</div>"),p.title_area=p.popup.find(".popbox-title")),i?p.adjust():d(p)}},u.prototype.isOpen=function(){return 1==this.properties.isopen},u.prototype.isClose=function(){return 0==this.properties.isopen},u.prototype.defaultSettings={width:"auto",height:"auto",maxwidth:"none",maxheight:"none",innerOverflow:!1,scaleToContent:!1,content:"",close:"X",title:"",onOpen:!1,onClose:!1,afterOpen:!1,afterClose:!1,fadeInSpeed:400,fadeOutSpeed:400,updatePositionDelay:200,autoScale:!1,customClass:"",animateSpeed:400,mode:"normal",gallery:{loading:"Loading",error:"Error"}},window.PopBox=u}(jQuery);